

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Primary User Interface: AstroDrizzle() &mdash; DrizzlePac 2.2.6 (2018-11-02 15:37:13 -0400) documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/stsci.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/stsci.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="DrizzlePac 2.2.6 (2018-11-02 15:37:13 -0400) documentation" href="index.html"/>
        <link rel="next" title="imageObject Classes" href="imageobject.html"/>
        <link rel="prev" title="Welcome to drizzlepac’s API documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
            <a href="index.html" class="icon icon-home"> DrizzlePac
            
            <img src="_static/stsci_pri_combo_mark_white.png" class="logo" />
          </a>

          
            
            
              <div class="version">
                2.2.6
              </div>
            
          
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
  
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Primary User Interface: AstroDrizzle()</a></li>
<li class="toctree-l1"><a class="reference internal" href="imageobject.html">imageObject Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Step 1: Process Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="static.html">Step 2: Generate a Static Mask</a></li>
<li class="toctree-l1"><a class="reference internal" href="sky.html">Step 3: Subtracting the Sky</a></li>
<li class="toctree-l1"><a class="reference internal" href="adrizzle.html">Step 4 and 8: Drizzling the Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="median.html">Step 5: Create a Median Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="ablot.html">Step 6: Blotting the Median Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="drizcr.html">Step 7: Cosmic-ray identification</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="tweakback.html">Tweakback</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">LICENSE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">DrizzlePac Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tweakreg.html">TWEAKREG: Alignment of Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="refimagefindpars.html">Refmagefindpars: Source finding parameters for the reference image</a></li>
<li class="toctree-l1"><a class="reference internal" href="imagefindpars.html">Imagefindpars: Source finding parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="image.html">Image Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="catalogs.html">Classes to manage Catalogs and WCS’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="wcscorr.html">Functions to Manage WCS Table Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="wcscorr.html#functions-to-manage-legacy-opus-wcs-keywords-in-the-wcs-table">Functions to Manage Legacy OPUS WCS Keywords in the WCS Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="tweakutils.html">TWEAKUTILS: Utility Functions for Tweakreg</a></li>
<li class="toctree-l1"><a class="reference internal" href="updatehdr.html">UPDATEHDR: Functions for Updating WCS with New Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapreg.html">Region mapping for TweakReg</a></li>
<li class="toctree-l1"><a class="reference internal" href="photeq.html">Photometric equalization for AstroDrizzle</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pixtopix.html">pixtopix: Coordinate transformation to/from drizzled images</a></li>
<li class="toctree-l1"><a class="reference internal" href="pixtosky.html">pixtosky: Coordinate transformation to sky coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="skytopix.html">skytopix: Coordinate transformation from sky coordinates</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="updatenpol.html">Updatenpol</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="runastrodriz.html">Running Astrodriz</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">DrizzlePac</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Primary User Interface: AstroDrizzle()</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/astrodrizzle.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-drizzlepac.astrodrizzle">
<span id="primary-user-interface-astrodrizzle"></span><span id="astrodrizzle"></span><h1>Primary User Interface: AstroDrizzle()<a class="headerlink" href="#module-drizzlepac.astrodrizzle" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="#drizzlepac.astrodrizzle.AstroDrizzle" title="drizzlepac.astrodrizzle.AstroDrizzle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AstroDrizzle</span></code></a> - Python implementation of <code class="xref py py-obj docutils literal notranslate"><span class="pre">MultiDrizzle</span></code></p>
<p><a class="reference internal" href="#drizzlepac.astrodrizzle.AstroDrizzle" title="drizzlepac.astrodrizzle.AstroDrizzle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AstroDrizzle</span></code></a> automates the process of aligning images in an output frame,
identifying cosmic-rays, removing distortion, and then combining the images
after removing the identified cosmic-rays.</p>
<dl class="docutils">
<dt>This process involves a number of steps, namely:</dt>
<dd><ol class="first last arabic simple">
<li>Processing the input images and input parameters</li>
<li>Creating a static mask</li>
<li>Performing sky subtraction</li>
<li>Drizzling onto separate output images</li>
<li>Creating the median image</li>
<li>Blotting the median image</li>
<li>Identifying and flagging cosmic-rays</li>
<li>Final combination</li>
</ol>
</dd>
</dl>
<p>A full description of this process can be found
in the <a class="reference external" href="http://drizzlepac.stsci.edu">DrizzlePac Handbook</a>.</p>
<p>The primary output from this task is the distortion-corrected,
cosmic-ray cleaned, and combined image as a FITS file.</p>
<p>This task requires numerous user-settable parameters to control the primary
aspects of each of the processing steps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Warren Hack</td>
</tr>
<tr class="field-even field"><th class="field-name">License:</th><td class="field-body"><a class="reference internal" href="LICENSE.html"><span class="doc">LICENSE</span></a></td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="drizzlepac.astrodrizzle.AstroDrizzle">
<code class="descclassname">drizzlepac.astrodrizzle.</code><code class="descname">AstroDrizzle</code><span class="sig-paren">(</span><em>input=None</em>, <em>mdriztab=False</em>, <em>editpars=False</em>, <em>configobj=None</em>, <em>wcsmap=None</em>, <em>**input_dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/astrodrizzle.html#AstroDrizzle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.astrodrizzle.AstroDrizzle" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>input</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str (Default = <code class="docutils literal notranslate"><span class="pre">'*flt.fits'</span></code>)</span></dt>
<dd><p class="first">The name or names of the input files to be processed, which can be
provided in any of the following forms:</p>
<blockquote>
<div><ul class="simple">
<li>filename of a single image</li>
<li>filename of an association (<code class="docutils literal notranslate"><span class="pre">ASN</span></code>) table</li>
<li>wild-card specification for files in directory</li>
<li>comma-separated list of filenames</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;file</span></code> filelist containing list of desired input filenames.
The file list needs to be provided as an ASCII text file containing
a list of filenames for all input images with one filename on each line
of the file. If inverse variance maps (<code class="docutils literal notranslate"><span class="pre">IVM</span></code> maps) have also been
created by the user and are to be used (by specifying <code class="docutils literal notranslate"><span class="pre">'IVM'</span></code> to the
parameter <code class="docutils literal notranslate"><span class="pre">final_wht_type</span></code>), then these are simply provided as a
second column in the filelist, with each <code class="docutils literal notranslate"><span class="pre">IVM</span></code> filename listed on the
same line as a second entry, after its corresponding exposure filename.</li>
</ul>
</div></blockquote>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the user specifies <code class="docutils literal notranslate"><span class="pre">IVM</span></code> for the <code class="docutils literal notranslate"><span class="pre">final_wht_type</span></code>,
but does not provide the names of <code class="docutils literal notranslate"><span class="pre">IVM</span></code> files, <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>
will automatically generate the <code class="docutils literal notranslate"><span class="pre">IVM</span></code> files itself for each input
exposure.</p>
</div>
</dd>
<dt><strong>editpars</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = False)</span></dt>
<dd><p class="first last">A parameter that allows user to edit input parameters by hand in the GUI.
<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> to use the GUI to edit parameters.</p>
</dd>
<dt><strong>configobj</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ConfigObjPars, ConfigObj, dict (Default = None)</span></dt>
<dd><p class="first last">An instance of <code class="xref py py-obj docutils literal notranslate"><span class="pre">stsci.tools.cfgpars.ConfigObjPars</span></code> or
<code class="xref py py-obj docutils literal notranslate"><span class="pre">stsci.tools.configobj.ConfigObj</span></code> which overrides default parameter
settings. When <code class="docutils literal notranslate"><span class="pre">configobj</span></code> is <code class="xref py py-obj docutils literal notranslate"><span class="pre">defaults</span></code>, default parameter values are
loaded from the user local configuration file usually located in
<code class="docutils literal notranslate"><span class="pre">~/.teal/astrodrizzle.cfg</span></code> or a matching configuration file in the
current directory. This configuration file stores most recent
settings that an user used when running <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> through the
<code class="docutils literal notranslate"><span class="pre">TEAL</span></code> interface. When <code class="docutils literal notranslate"><span class="pre">configobj</span></code> is <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>
parameters not provided explicitly will be initialized with their
default values as described in the “Other Parameters” section.</p>
</dd>
<dt><strong>input_dict</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict, optional</span></dt>
<dd><p class="first">An optional list of parameters specified by the user, which can also
be used to override the defaults.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This list of parameters <strong>can</strong> include the <code class="docutils literal notranslate"><span class="pre">updatewcs</span></code>
parameter, even though this parameter no longer can be set through
the <code class="docutils literal notranslate"><span class="pre">TEAL</span></code> GUI.</p>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This list of parameters <strong>can</strong> contain parameters specific
to the <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> task itself described here in the
“Other Parameters” section.</p>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><dl class="first last docutils">
<dt><strong>output</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first">The rootname for the output drizzled products. This step can result
in the creation of several files, including:</p>
<blockquote>
<div><ul class="simple">
<li>copies of each input image as a <code class="docutils literal notranslate"><span class="pre">FITS</span></code> image, if
<code class="docutils literal notranslate"><span class="pre">workinplace='Yes'</span></code> and/or input images are in <code class="docutils literal notranslate"><span class="pre">GEIS</span></code> format.</li>
<li>mask files and coeffs files created by <code class="docutils literal notranslate"><span class="pre">PyDrizzle</span></code> for use by
<code class="docutils literal notranslate"><span class="pre">drizzle</span></code>.</li>
</ul>
</div></blockquote>
<p class="last">If an association file has been given as input, the specified filename
will be used instead of the product name specified in the ASN file.
Similarly, if a single exposure is provided, the rootname of the
single exposure will be used for the output product instead of relying
on the input rootname. If no value is provided when a filelist or
wild-card specification is given as input, then a rootname of <code class="docutils literal notranslate"><span class="pre">'final'</span></code>
will be used for the output file name.</p>
</dd>
<dt><strong>mdriztab</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = False)</span></dt>
<dd><p class="first last">This button will immediately update the parameter values in the <code class="docutils literal notranslate"><span class="pre">TEAL</span></code>
GUI based on those provided by the <code class="docutils literal notranslate"><span class="pre">MDRIZTAB</span></code> reference table referenced
in the first input image. This requires that the <code class="docutils literal notranslate"><span class="pre">MDRIZTAB</span></code> reference
file be available locally.</p>
</dd>
<dt><strong>runfile</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘astrodrizzle.log’)</span></dt>
<dd><p class="first last">This log file will contain all the output messages generated during
processing, including full details of any errors/exceptions.
These messages will be a super-set of those reported to the screen
during processing.</p>
</dd>
<dt><strong>wcskey</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first">This parameter corresponds to the <em>key</em> for the <code class="docutils literal notranslate"><span class="pre">WCS</span></code> being selected by
the user. It allows the user to select which <code class="docutils literal notranslate"><span class="pre">WCS</span></code> solution should be
used for processing the images when multiple <code class="docutils literal notranslate"><span class="pre">WCS</span></code>’s have been updated in
each input image header using the Paper I Multiple WCS FITS standard.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Use of this parameter should be done only when all input
images have been updated using the Paper I FITS standard for
specifying Multiple <code class="docutils literal notranslate"><span class="pre">WCS</span></code>’s in each image header. This parameter
assumes that the same <code class="docutils literal notranslate"><span class="pre">WCS</span></code> letter corresponds to <code class="docutils literal notranslate"><span class="pre">WCS</span></code>’s that have been
updated in a consistent manner. For example, all input images have been
updated to be consistent with their distortion model in the <code class="docutils literal notranslate"><span class="pre">WCS</span></code>’s
with key of <em>A</em>.</p>
</div>
</dd>
<dt><strong>proc_unit</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘native’)</span></dt>
<dd><p class="first">The units to be used for the final output drizzled product. Valid
values and definitions are:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">'native'</span></code>: Output DRZ product and input ‘values’ given in the native
units of the input image.</li>
<li><code class="docutils literal notranslate"><span class="pre">'electrons'</span></code>: Output DRZ product and input ‘values’ given in units
of electrons.</li>
</ul>
</dd>
<dt><strong>coeffs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">This parameter determines whether or not to use the coefficients stored
in the each input image header. If turned off, no distortion coefficients
will be applied during the coordinate transformations.</p>
</dd>
<dt><strong>context</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">This parameter specifies whether or not to create a context image during
the final drizzle combination. The context image contains the information
regarding which image(s) contributed to each pixel encoded as a bit-mask.
More information on context images can be obtained from the
ACS Data Handbook.</p>
</dd>
<dt><strong>group</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = None)</span></dt>
<dd><p class="first last">This parameter establishes whether or not a single <code class="docutils literal notranslate"><span class="pre">FITS</span></code> extension,
or group will be drizzled. If an extension is provided, then only
that chip will be drizzled onto the output frame. Either a <code class="docutils literal notranslate"><span class="pre">FITS</span></code>
extension number, a GEIS group number (such as ‘1’), or a <code class="docutils literal notranslate"><span class="pre">FITS</span></code>
extension name (such as <code class="docutils literal notranslate"><span class="pre">'sci,1'</span></code>) may be specified.</p>
</dd>
<dt><strong>build</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = No)</span></dt>
<dd><p class="first last">When this parameter is set to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>), AstroDrizzle will combine
the separate ‘drizzle’ output files into a single multi-extension format
<code class="docutils literal notranslate"><span class="pre">FITS</span></code> file. This combined output file will contain seperate
<code class="docutils literal notranslate"><span class="pre">SCI</span></code> (science), <code class="docutils literal notranslate"><span class="pre">WHT</span></code> (weight), and <code class="docutils literal notranslate"><span class="pre">CTX</span></code> (context) extensions.
If this parameter is set to <code class="docutils literal notranslate"><span class="pre">'No'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>), a separate simple <code class="docutils literal notranslate"><span class="pre">FITS</span></code>
file will be created for each aforementioned extension.</p>
</dd>
<dt><strong>crbit</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 4096)</span></dt>
<dd><p class="first last">This parameter sets the bit value for CR identification in the DQ array.</p>
</dd>
<dt><strong>stepsize</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 10)</span></dt>
<dd><p class="first last">This parameter controls the internal grid of points used in the coordinate
transformation from the input image to the output frame. The default value
of 10 indicates that every 10th pixel will be transformed using the full
<code class="docutils literal notranslate"><span class="pre">WCS</span></code>-based transformation. All remaining pixels will then be transformed
using bilinear interpolation based on those pixels (i.e. every 10th pixel
in the case of the default parameter setting) that were fully transformed.</p>
</dd>
<dt><strong>resetbits</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 4096)</span></dt>
<dd><p class="first last">This parameter allows the user to specify which DQ bits of each input
image DQ array should be reset to a value of 0. This operation is
performed on the copy of the input data after updating the headers based
on the ‘updatewcs’ parameter, and prior to starting any of the
<code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> processing steps (static mask, sky subtraction,
and so on).</p>
</dd>
<dt><strong>num_cores: int (Default = None)</strong></dt>
<dd><p class="first last">This specifies the number of CPU cores to use during processing. Any value
less than 2 will disable all use of parallel processing.</p>
</dd>
<dt><strong>in_memory: bool (Default = False)</strong></dt>
<dd><p class="first last">This parameter sets whether or not to keep all intermediate products
in memory when processing. This includes all single drizzle products
(<code class="docutils literal notranslate"><span class="pre">*single_sci</span></code> and <code class="docutils literal notranslate"><span class="pre">*single_wht</span></code>), median image, blot images, and
crmask images. The use of this option will therefore require significantly
more memory than usual to process the data while reducing the overall
processing time by eliminating most of the disk activity.
<em>Only</em> the products of the final drizzle step will get written out when
this parameter gets specified as <a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p>
</dd>
<dt><strong>**STATE OF INPUT FILES**</strong></dt>
<dd></dd>
<dt><strong>restore: bool (Default = No)</strong></dt>
<dd><p class="first last">Setting this to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>) directs <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> to copy the
input images from the <code class="docutils literal notranslate"><span class="pre">'OrIg_files'</span></code> sub-directory and use them for
processing, if they had been archived by <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> using the
<code class="docutils literal notranslate"><span class="pre">preserve</span></code> or <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> parameters already.  If set to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code>
and the input files had not been archived already, it will simply ignore
this and work with the current input images.</p>
</dd>
<dt><strong>preserve</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">Copy input files to archive directory, if not already archived. This
parameter determines whether or not <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> creates a copy of
the input file in a sub-directory called <code class="docutils literal notranslate"><span class="pre">'OrIg_files'</span></code>.
If a copy already exists in this directory, then the previously existing
version will NOT be overwritten.</p>
</dd>
<dt><strong>overwrite</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = No)</span></dt>
<dd><p class="first last">Copy input files into archive, overwriting older files if required?
This parameter will cause <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> to make a copy of each input
file in the <code class="docutils literal notranslate"><span class="pre">'OrIg_files'</span></code> directory regardless of whether a previous
copy existed or not, and will overwrite any previous copy should it be
present.</p>
</dd>
<dt><strong>clean</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = No)</span></dt>
<dd><p class="first last">The temporary files created by <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> can be automatically
removed by setting this parameter to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>). The affected
files include the coefficient and static mask files created by
<code class="docutils literal notranslate"><span class="pre">PyDrizzle</span></code>, in addition to other intermediate files created by
<code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>. It is often useful to retain the intermediate files
and examine them when first learning how to run <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>.
However, when running <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> routinely, or on a small disk drive,
these files can be removed to conserve space.</p>
</dd>
<dt><strong>*STEP 1: STATIC MASK*</strong></dt>
<dd></dd>
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">Create a static bad-pixel mask from the data?  This mask flags all pixels
that deviate by more than a value of ‘static_sig’ sigma below the
image median, since these pixels are typically the result of bad pixel
oversubtraction in the dark image during calibration.</p>
</dd>
<dt><strong>static_sig</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 4.0)</span></dt>
<dd><p class="first last">The number of sigma below the RMS to use as the clipping limit for
creating the static mask.</p>
</dd>
<dt><strong>**STEP 2: SKY SUBTRACTION**</strong></dt>
<dd></dd>
<dt><strong>skysub</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">Turn on or off sky subtraction on the input data. When <code class="docutils literal notranslate"><span class="pre">skysub</span></code> is set
to <code class="docutils literal notranslate"><span class="pre">no</span></code>, then <code class="docutils literal notranslate"><span class="pre">skyuser</span></code> field will be enabled and if user specifies a
header keyword showing the sky value in the image, then that value will
be used for CR-rejection but it will not be subtracted from the (drizzled)
image data. If user sets <code class="docutils literal notranslate"><span class="pre">skysub</span></code> to <code class="xref py py-obj docutils literal notranslate"><span class="pre">yes</span></code> then <code class="xref py py-obj docutils literal notranslate"><span class="pre">skyuser</span></code> field will be
disabled (and if it is not empty - it will be ignored) and user can use
one of the methods available through the <code class="docutils literal notranslate"><span class="pre">skymethod</span></code> parameter to
compute the sky or provide a file (see <code class="docutils literal notranslate"><span class="pre">skyfile</span></code> parameter) with values
that should be subtracted from (single) drizzled images.</p>
</dd>
<dt><strong>skymethod</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{‘localmin’, ‘globalmin+match’, ‘globalmin’, ‘match’} (Default = ‘localmin’)</span></dt>
<dd><p class="first">Select the algorithm for sky computation:</p>
<ul class="last">
<li><p class="first"><strong>‘localmin’</strong>: compute a common sky for all members of <em>an exposure</em>.
For a typical use, it will compute
sky values for each chip/image extension (marked for sky
subtraction in the <code class="docutils literal notranslate"><span class="pre">input</span></code> parameter) in an input image,
and it will subtract the previously found minimum sky value
from all chips (marked for sky subtraction) in that image.
This process is repeated for each input image.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This setting is recommended when regions of overlap between images
are dominated by “pure” sky (as opposite to extended, diffuse
sources).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is similar to the “skysub” algorithm used in previous
versions of <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>.</p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'globalmin'</span></code>: compute a common sky value for all members of
<strong>all</strong> “skylines”. It will compute
sky values for each chip/image extension (marked for sky
subtraction in the <code class="docutils literal notranslate"><span class="pre">input</span></code> parameter) in <strong>all</strong> input
images, find the minimum sky value, and then it will
subtract the <strong>same</strong> minimum sky value from <strong>all</strong> chips
(marked for sky subtraction) in <strong>all</strong> images. This method <em>may</em>
useful when input images already have matched background values.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'match'</span></code>: compute differences in sky values between images
in common (pair-wise) sky regions. In this case computed sky values
will be relative (delta) to the sky computed in one of the
input images whose sky value will be set to (reported to be) 0.
This setting will “equalize” sky values between the images in
large mosaics. However, this method is not recommended when used
in conjunction with <a class="reference external" href="http://stsdas.stsci.edu/stsci_python_sphinxdocs_2.13/drizzlepac/astrodrizzle.html">AstroDrizzle</a>
because it computes relative sky values while <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> needs
“measured” sky values for median image generation and CR rejection.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'globalmin+match'</span></code>: first find a minimum “global” sky value
in all input images and then use <code class="docutils literal notranslate"><span class="pre">'match'</span></code> method to
equalize sky values between images.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is the <em>recommended</em> setting for images
containing diffuse sources (e.g., galaxies, nebulae)
covering significant parts of the image.</p>
</div>
</li>
</ul>
</dd>
<dt><strong>skywidth</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 0.3)</span></dt>
<dd><p class="first last">Bin width, in sigma, used to sample the distribution of pixel flux values
in order to compute the sky background statistics.</p>
</dd>
<dt><strong>skystat</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{‘median’, ‘mode’, ‘mean’} (Default = ‘median’)</span></dt>
<dd><p class="first last">Statistical method for determining the sky value from the image pixel
values.</p>
</dd>
<dt><strong>skylower</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Lower limit of usable pixel values for computing the sky. This value should
be specified in the units of the input image(s).</p>
</dd>
<dt><strong>skyupper</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Upper limit of usable pixel values for computing the sky. This value should
be specified in the units of the input image(s).</p>
</dd>
<dt><strong>skyclip</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 5)</span></dt>
<dd><p class="first last">Number of clipping iterations to use when computing the sky value.</p>
</dd>
<dt><strong>skylsigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 4.0)</span></dt>
<dd><p class="first last">Lower clipping limit, in sigma, used when computing the sky value.</p>
</dd>
<dt><strong>skyusigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 4.0)</span></dt>
<dd><p class="first last">Upper clipping limit, in sigma, used when computing the sky value.</p>
</dd>
<dt><strong>skymask_cat</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first last">File name of a catalog file listing user masks to be used with images.</p>
</dd>
<dt><strong>use_static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = True)</span></dt>
<dd><p class="first last">Specifies whether or not to use static mask to exclude masked image pixels
from sky computations.</p>
</dd>
<dt><strong>sky_bits</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, str, None (Default = 0)</span></dt>
<dd><p class="first">Integer sum of all the DQ bit values from the input image’s DQ array that
should be considered “good” when building masks for sky computations.
For example, if pixels in the DQ array can be combinations of 1, 2, 4,
and 8 flags and one wants to consider DQ “defects” having flags 2 and 4
as being acceptable for sky computations, then <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code> should be set
to 2+4=6. Then a DQ pixel having values 2,4, or 6 will be considered a
good pixel, while a DQ pixel with a value, e.g., 1+2=3, 4+8=12, etc.
will be flagged as a “bad” pixel.</p>
<p>Alternatively, one can enter a comma- or ‘+’-separated list of integer
bit flags that should be added to obtain the final “good” bits.
For example, both <code class="docutils literal notranslate"><span class="pre">4,8</span></code> and <code class="docutils literal notranslate"><span class="pre">4+8</span></code> are equivalent to
setting <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code> to 12.</p>
<div class="line-block">
<div class="line">Default value (0) will make <em>all</em> non-zero pixels in the DQ mask to
be considered “bad” pixels, and the corresponding image pixels will
not be used for sky computations.</div>
</div>
<div class="line-block">
<div class="line">Set <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code> to <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> to turn off the use of image’s DQ array for
sky computations.</div>
</div>
<div class="line-block">
<div class="line">In order to reverse the meaning of the <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code>
parameter from indicating values of the “good” DQ flags
to indicating the “bad” DQ flags, prepend ‘~’ to the string
value. For example, in order not to use pixels with
DQ flags 4 and 8 for sky computations and to consider
as “good” all other pixels (regardless of their DQ flag),
set <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code> to <code class="docutils literal notranslate"><span class="pre">~4+8</span></code>, or <code class="docutils literal notranslate"><span class="pre">~4,8</span></code>. To obtain the
same effect with an <a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a> input value (except for 0),
enter -(4+8+1)=-9. Following this convention,
a <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code> string value of <code class="docutils literal notranslate"><span class="pre">'~0'</span></code> would be equivalent to
setting <code class="docutils literal notranslate"><span class="pre">sky_bits=None</span></code>.</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">DQ masks (if used), <em>will be</em> combined with user masks specified
in the input &#64;-file.</p>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p>To summarize, below are provided allowable syntaxes for <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code>:</p>
<ul class="last simple">
<li>Specify that bits 4,8, and 512 be considered “good” bits
and that all other bits be considered “bad” bits:<ul>
<li>Integer: 524 [numerically: 4+8+512=524]</li>
<li>String: 4+8+512</li>
<li>String: 4,8,512</li>
</ul>
</li>
<li>Specify that only bits 4,8, and 512 be considered “bad” bits
and that all other bits be considered “good” bits:<ul>
<li>Integer: -525 [numerically: ~(4+8+512)=~524=-(524+1)=-525]</li>
<li>String: ~4+8+512 or ~(4+8+512)</li>
<li>String: ~4,8,512 or ~(4,8,512)</li>
</ul>
</li>
</ul>
</div>
</dd>
<dt><strong>skyfile</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first last">Name of file containing user-computed sky values to be used with each input
image. This ASCII file should only contain 2 columns: image filename in
column 1 and sky value in column 2 (and higher hor multi-chip images).
The sky value should be provided in units that match the units of the input
image and for multi-chip images, if only one sky value was provided
in column 2, the same value will be applied to all chips. If more than one
sky value are provided (in columns 2, 3, …) then the number of sky values
should match the number of <code class="docutils literal notranslate"><span class="pre">SCI</span></code> extensions in the images.</p>
</dd>
<dt><strong>skyuser</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first">Name of header keyword which records the sky value already subtracted
from the image by the user. The <code class="docutils literal notranslate"><span class="pre">skyuser</span></code> parameter is ignored when
<code class="docutils literal notranslate"><span class="pre">skysub</span></code> is set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>.</p>
<p>Alternatively, user can enter the name of a file that contains
user-computed sky values. To distinguish a file name from a header keyword,
prepend <code class="docutils literal notranslate"><span class="pre">'&#64;'</span></code> to the file name. For example <code class="docutils literal notranslate"><span class="pre">'&#64;my_sky_values.txt'</span></code>.
The format of the file with user-supplied sky values is the same as that of
a <code class="docutils literal notranslate"><span class="pre">skyfile</span></code>.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When <code class="docutils literal notranslate"><span class="pre">skysub='no'</span></code> and <code class="docutils literal notranslate"><span class="pre">skyuser</span></code> field is empty, then
<code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> will assume that sky background is 0.0 for the purpose
of cosmic-ray rejection.</p>
</div>
</dd>
<dt><strong>**STEP 3: DRIZZLE SEPARATE IMAGES**</strong></dt>
<dd></dd>
<dt><strong>driz_separate</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">This parameter specifies whether or not to drizzle each input image onto
separate output images. The separate output images will all have the same
<code class="docutils literal notranslate"><span class="pre">WCS</span></code> as the final combined output frame. These images are used to create
the median image, needed for cosmic ray rejection.</p>
</dd>
<dt><strong>driz_sep_kernel</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str {‘square’, ‘point’, ‘gaussian’, ‘turbo’, ‘tophat’, ‘lanczos3’} (Default = ‘turbo’)</span></dt>
<dd><p class="first">Used for the initial separate drizzling operation only, this parameter
specifies the form of the kernel function used to distribute flux onto
the separate output images. The current options are:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'square'</span></code>: original classic drizzling kernel</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'point'</span></code>: this kernel is a point so each input pixel can only
contribute to the single pixel that is closest to the output position.
It is equivalent to the limit as <code class="docutils literal notranslate"><span class="pre">pixfrac-&gt;0</span></code>, and is very fast.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'gaussian'</span></code>: this kernel is a circular gaussian with a FWHM
equal to the value of pixfrac, measured in input pixels.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'turbo'</span></code>: this is similar to <code class="docutils literal notranslate"><span class="pre">kernel='square'</span></code> but the box is
always the same shape and size on the output grid, and is always
aligned with the X and Y axes. This may result in a significant speed
increase.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'tophat'</span></code>: this kernel is a circular “top hat” shape of width
<code class="docutils literal notranslate"><span class="pre">pixfrac</span></code>. It effects only output pixels within a radius of
<code class="docutils literal notranslate"><span class="pre">pixfrac/2</span></code> from the output position.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'lanczos3'</span></code>: a Lanczos style kernel, extending a radius
of 3 pixels from the center of the detection. The Lanczos kernel is
a damped and bounded form of the “sinc” interpolator, and is very
effective for resampling single images when <code class="docutils literal notranslate"><span class="pre">scale=pixfrac=1</span></code>.
It leads to less resolution loss than other kernels, and typically
results in reduced correlated noise in outputs.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">'lanczos3'</span></code> kernel tends to result in much slower
processing as compared to other kernel options. This option should
never be used for <code class="docutils literal notranslate"><span class="pre">pixfrac!=1.0</span></code>, and is not recommended
for <code class="docutils literal notranslate"><span class="pre">scale!=1.0</span></code>.</p>
</div>
</li>
</ul>
</div></blockquote>
<p class="last">The default for this step is <code class="docutils literal notranslate"><span class="pre">'turbo'</span></code> since it is much faster
than <code class="docutils literal notranslate"><span class="pre">'square'</span></code>, and it is quite satisfactory for the purposes
of generating the median image. More information about the different
kernels can be found in the help file for the drizzle task.</p>
</dd>
<dt><strong>driz_sep_wt_scl</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = exptime)</span></dt>
<dd><p class="first last">This parameter specifies the weighting factor for input image.
If <code class="docutils literal notranslate"><span class="pre">driz_sep_wt_scl=exptime</span></code>, then the scaling value will be set equal
to the exposure time found in the image header. The use of the default
value is recommended for producing optimal behavior for most scenarious.
It is possible to set <code class="docutils literal notranslate"><span class="pre">wt_scl=expsq</span></code> for weighting by the square of
the exposure time, which is optimal for read-noise dominated images.</p>
</dd>
<dt><strong>driz_sep_pixfrac</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 1.0)</span></dt>
<dd><p class="first last">Fraction by which input pixels are “shrunk” before being drizzled onto the
output image grid, given as a real number between 0 and 1. This specifies
the size of the footprint, or “dropsize”, of a pixel in units of the input
pixel size. If pixfrac is set to less than 0.001, the kernel parameter will
be reset to <code class="docutils literal notranslate"><span class="pre">'point'</span></code> for more efficient processing. In the step of
drizzling each input image onto a separate output image, the default
value of 1.0 is best in order to ensure that each output drizzled image
is fully populated with pixels from the input image. For more information,
see the help for the <code class="docutils literal notranslate"><span class="pre">drizzle</span></code> task.</p>
</dd>
<dt><strong>driz_sep_fillval</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = None)</span></dt>
<dd><p class="first last">Value to be assigned to output pixels that have zero weight, or that
receive flux from any input pixels during drizzling. This parameter
corresponds to the <code class="docutils literal notranslate"><span class="pre">fillval</span></code> parameter of the ‘drizzle’ task. If
the default of <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> is used, and if the weight in both the input
and output images for a given pixel are zero, then the output pixel
will be set to the value it would have had if the input had a
non-zero weight. Otherwise, if a numerical value is provided (e.g. 0),
then these pixels will be set to that value.</p>
</dd>
<dt><strong>driz_sep_bits</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, str, or None (Default = 0)</span></dt>
<dd><p class="first last">Integer sum of all the DQ bit values from the input image’s DQ array
that should be considered ‘good’ when building the weighting mask.
This can also be used to reset pixels to good if they had been flagged
as cosmic rays during a previous run of <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>, by adding
the value 4096 for <code class="docutils literal notranslate"><span class="pre">ACS</span></code> and <code class="docutils literal notranslate"><span class="pre">WFPC2</span></code> data. For possible input formats,
see the description for <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code> parameter.</p>
</dd>
<dt><strong>**STEP 3a: CUSTOM WCS FOR SEPARATE OUTPUTS**</strong></dt>
<dd></dd>
<dt><strong>driz_sep_wcs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = No)</span></dt>
<dd><p class="first last">Define custom <code class="docutils literal notranslate"><span class="pre">WCS</span></code> for seperate output images?</p>
</dd>
<dt><strong>driz_sep_refimage</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first last">Reference image from which a <code class="docutils literal notranslate"><span class="pre">WCS</span></code> solution can be obtained.</p>
</dd>
<dt><strong>driz_sep_rot</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Position Angle of output image’s Y-axis relative to North. A value of 0.0
would orient the final output image to be North up. The default of <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>
specifies that the images will not be rotated, but will instead be drizzled
in the default orientation for the camera with the x and y axes of the
drizzled image corresponding approximately to the detector axes.
This conserves disk space, as these single drizzled images are only used
in the intermediate step of creating a median image.</p>
</dd>
<dt><strong>driz_sep_scale</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Linear size of the output pixels in arcseconds/pixel for each separate
drizzled image (used in creating the median for cosmic ray rejection).
The default value of None specifies that the undistorted pixel scale for
the first input image will be used as the pixel scale for all the output
images.</p>
</dd>
<dt><strong>driz_sep_outnx</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = None)</span></dt>
<dd><p class="first last">Size, in pixels, of the X axis in the output images that each input will
be drizzled onto. If no value is specified, the smallest size that can
accommodate the full dithered field will be used.</p>
</dd>
<dt><strong>driz_sep_outny</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = None)</span></dt>
<dd><p class="first last">Size, in pixels, of the Y axis in the output images that each input will
be drizzled onto. If no value is specified, the smallest size that can
accommodate the full dithered field will be used.</p>
</dd>
<dt><strong>driz_sep_ra</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Right ascension (in decimal degrees) specifying the center of the output
image. If this value is not designated, the center will automatically be
calculated based on the distribution of image dither positions.</p>
</dd>
<dt><strong>driz_sep_dec</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Declination (in decimal degrees) specifying the center of the output image.
If this value is not designated, the center will automatically be
calculated based on the distribution of image dither positions.</p>
</dd>
<dt><strong>**STEP 4: CREATE MEDIAN IMAGE**</strong></dt>
<dd></dd>
<dt><strong>median</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">This parameter specifies whether or not to create a median image. This
median image will be used as the comparison ‘truth’ image in the cosmic ray
rejection step.</p>
</dd>
<dt><strong>median_newmasks</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">This parameter specifies whether or not new mask files will be created when
the median image is created. These masks are generated from weight files
previously produced by the “driz_separate” step, and contain all bad pixel
information used to exclude pixels when calculating the median.
Generally this step should be set to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>), unless for
some reason, it is desirable to include bad pixel information when
generating the median.</p>
</dd>
<dt><strong>combine_maskpt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 0.3)</span></dt>
<dd><p class="first last">Percentage of weight image values, below which the are flagged.</p>
</dd>
<dt><strong>combine_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str {‘median’, ‘mean’, ‘minmed’, ‘imedian’, ‘imean’, ‘iminmed’} (Default = ‘minmed’)</span></dt>
<dd><p class="first">This parameter defines the method that will be used to create the median
image.  The ‘mean’ and ‘median’ options set the calculation type when
running ‘numcombine’, a numpy method for median-combining arrays to create
the median image. The <code class="docutils literal notranslate"><span class="pre">'minmed'</span></code> option will produce an image that is
generally the same as the median, except in cases where the median is
significantly higher than the minimum good pixel value. In this case,
<code class="docutils literal notranslate"><span class="pre">'minmed'</span></code> will choose the minimum value. The sigma thresholds for this
decision are provided by the <code class="docutils literal notranslate"><span class="pre">'combine_nsigma'</span></code> parameter. However, as
the <code class="docutils literal notranslate"><span class="pre">'combine_nsigma'</span></code> parameter does not adjust for the larger
probability of a single “nsigma” event with a greater number of images,
<code class="docutils literal notranslate"><span class="pre">'minmed'</span></code> will bias the comparison image low for a large number of
images. The value of sigma is computed as
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">\sigma = \sqrt(M + S + R^2)</tt>)</p>
<p>latex exited with error
[stdout]
This is pdfTeXk, Version 3.141592-1.40.3 (Web2C 7.5.6)
 %&amp;-line parsing enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2005/12/01&gt;
Babel &lt;v3.8h&gt; and hyphenation patterns for english, usenglishmax, dumylang, noh
yphenation, arabic, basque, bulgarian, coptic, welsh, czech, slovak, german, ng
erman, danish, esperanto, spanish, catalan, galician, estonian, farsi, finnish,
 french, greek, monogreek, ancientgreek, croatian, hungarian, interlingua, ibyc
us, indonesian, icelandic, italian, latin, mongolian, dutch, norsk, polish, por
tuguese, pinyin, romanian, russian, slovenian, uppersorbian, serbian, swedish, 
turkish, ukenglish, ukrainian, loaded.
(/usr/share/texmf/tex/latex/base/article.cls
Document Class: article 2005/09/16 v1.4f Standard LaTeX document class
(/usr/share/texmf/tex/latex/base/size12.clo))
(/usr/share/texmf/tex/latex/base/inputenc.sty
(/usr/share/texmf/tex/latex/ucs/utf8x.def))
(/usr/share/texmf/tex/latex/ucs/ucs.sty
(/usr/share/texmf/tex/latex/ucs/data/uni-global.def))
(/usr/share/texmf/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texmf/tex/latex/amsmath/amstext.sty
(/usr/share/texmf/tex/latex/amsmath/amsgen.sty))
(/usr/share/texmf/tex/latex/amsmath/amsbsy.sty)
(/usr/share/texmf/tex/latex/amsmath/amsopn.sty))
(/usr/share/texmf/tex/latex/amscls/amsthm.sty)
(/usr/share/texmf/tex/latex/amsfonts/amssymb.sty
(/usr/share/texmf/tex/latex/amsfonts/amsfonts.sty))

! LaTeX Error: File `anyfontsize.sty' not found.

Type X to quit or &lt;RETURN&gt; to proceed,
or enter new name. (Default extension: sty)

Enter file name: 
! Emergency stop.
&lt;read *&gt; 
         
l.9 \usepackage
               {bm}^^M
No pages of output.
Transcript written on math.log.
</p>
</div>
, where <em>M</em> is the median image data
(in electrons), <em>S</em> is the value of the subtracted sky (in electrons),
and <em>R</em> is the value of the readout noise (in electrons).
<code class="docutils literal notranslate"><span class="pre">'minmed'</span></code> is highly recommended for three images, and is
good for four to six images, but should be avoided for ten or more images.</p>
<p>A value of ‘median’ is the recommended method for a large number of images,
and works equally well as minmed down to approximately four images.
However, the user should set the <code class="docutils literal notranslate"><span class="pre">combine_nhigh</span></code> parameter to a value of
1 when using “median” with four images, and consider raising this
parameter’s value for larger numbers of images. As a median averages the
two inner values when the number of values being considered is even, the
user may want to keep the total number of images minus <code class="docutils literal notranslate"><span class="pre">combine_nhigh</span></code>
odd when using <code class="docutils literal notranslate"><span class="pre">median</span></code>.</p>
<p class="last">The options starting with <code class="docutils literal notranslate"><span class="pre">'i'</span></code>, such as <code class="docutils literal notranslate"><span class="pre">'imedian'</span></code>, works just like
the normal median operation except when dealing with a pixel were all the
values are flagged as ‘bad’.  In this case, the <code class="docutils literal notranslate"><span class="pre">'i'</span></code> functions return
the last pixel in the stack as if it were good.  This will prevent
saturated pixels in the image from leaving holes in the middle of the
stars, for example.</p>
</dd>
<dt><strong>combine_nsigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = ‘4 3’)</span></dt>
<dd><p class="first last">This parameter defines the sigmas used for accepting minimum values,
rather than median values, when using the <code class="docutils literal notranslate"><span class="pre">'minmed'</span></code> combination method.
If two values are specified the first value will be used in the initial
choice between median and minimum, while the second value will be used
in the “growing” step to reject additional pixels around those identified
in the first step. If only one value is specified, then it is used in
both steps.</p>
</dd>
<dt><strong>combine_nlow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 0)</span></dt>
<dd><p class="first last">This parameter sets the number of low value pixels to reject automatically
during image combination.</p>
</dd>
<dt><strong>combine_nhigh</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 0)</span></dt>
<dd><p class="first last">This parameter sets the number of high value pixels to reject automatically
during image combination.</p>
</dd>
<dt><strong>combine_lthresh</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Sets the lower threshold for clipping input pixel values during image
combination. This value gets passed directly to <code class="docutils literal notranslate"><span class="pre">imcombine</span></code> for use in
creating the median image. If the parameter is set to <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>,
no thresholds will be imposed.</p>
</dd>
<dt><strong>combine_hthresh</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">This parameter sets the upper threshold for clipping input pixel values
during image combination. The value for this parameter is passed directly
to <code class="docutils literal notranslate"><span class="pre">imcombine</span></code> for use in creating the median image. If the parameter
is set to <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, no thresholds will be imposed.</p>
</dd>
<dt><strong>combine_grow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 1)</span></dt>
<dd><p class="first last">Width, in pixels, beyond the limit set by the rejection algorithm being
used, for additional pixels to be rejected in an image. This parameter
is used to set the <code class="docutils literal notranslate"><span class="pre">grow</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">imcombine</span></code> for use in creating
the median image <strong>only when</strong> <code class="docutils literal notranslate"><span class="pre">combine_type</span></code> is <code class="docutils literal notranslate"><span class="pre">'(i)minmed'</span></code>.
When <code class="docutils literal notranslate"><span class="pre">combine_type</span></code> is anything other than <code class="docutils literal notranslate"><span class="pre">'(i)minmed'</span></code>, this
parameter is ignored (set to 0).</p>
</dd>
<dt><strong>combine_bufsize</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Size of buffer, in MB (MiB), to use when reading in each section of each
input image. The default buffer size is 1MB. The larger the buffer size,
the fewer times the code needs to open each input image and the more memory
will be required to create the median image. A larger buffer can be
helpful when using compression, since slower copies need to be made of
each set of rows from each input image instead of using memory-mapping.</p>
</dd>
<dt><strong>**STEP 5: BLOT BACK THE MEDIAN IMAGE**</strong></dt>
<dd></dd>
<dt><strong>blot</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">Perform the blot operation on the median image? If set to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code>
(<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>), the output will be median smoothed images that match each input
chips location, and will be used in the cosmic ray rejection step.</p>
</dd>
<dt><strong>blot_interp</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str{‘nearest’, ‘linear’, ‘poly3’, ‘poly5’, ‘sinc’} (Default = ‘poly5’)</span></dt>
<dd><p class="first">This parameter defines the method of interpolation to be used when blotting
drizzled images back to their original <code class="docutils literal notranslate"><span class="pre">WCS</span></code> solution.
Valid options include:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">'nearest'</span></code>: Nearest neighbor</li>
<li><code class="docutils literal notranslate"><span class="pre">'linear'</span></code>: Bilinear interpolation in x and y</li>
<li><code class="docutils literal notranslate"><span class="pre">'poly3'</span></code>: Third order interior polynomial in x and y</li>
<li><code class="docutils literal notranslate"><span class="pre">'poly5'</span></code>: Fifth order interior polynomial in x and y</li>
<li><code class="docutils literal notranslate"><span class="pre">'sinc'</span></code>: Sinc interpolation (accurate but slow)</li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">'poly5'</span></code> interpolation method has been chosen as the default because
it is relatively fast and accurate.</p>
<p class="last">If <code class="docutils literal notranslate"><span class="pre">'sinc'</span></code> interpolation is selected, then the value of the parameter
for <code class="docutils literal notranslate"><span class="pre">blot_sinscl</span></code> will be used to specify the size of the sinc
interpolation kernel.</p>
</dd>
<dt><strong>blot_sinscl</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 1.0)</span></dt>
<dd><p class="first last">Size of the sinc interpolation kernel in pixels.</p>
</dd>
<dt><strong>blot_addsky</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">Add back a sky value using the MDRIZSKY value from the header.
If <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>), the blot_skyval parameter is ignored.</p>
</dd>
<dt><strong>blot_skyval</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 0.0)</span></dt>
<dd><p class="first last">This is a user-specified custom sky value to be added to the blot image.
This is only used if blot_addsky is <code class="docutils literal notranslate"><span class="pre">'No'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>).</p>
</dd>
<dt><strong>**STEP 6: REMOVE COSMIC RAYS WITH DERIV, DRIZ_CR**</strong></dt>
<dd></dd>
<dt><strong>driz_cr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">Perform cosmic-ray detection? If set to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>), cosmic-rays
will be detected and used to create cosmic-ray masks based on the
algorithms from ‘deriv’ and <code class="docutils literal notranslate"><span class="pre">driz_cr</span></code>.</p>
</dd>
<dt><strong>driz_cr_corr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = No)</span></dt>
<dd><p class="first last">Create a cosmic-ray cleaned input image? If set to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>),
a cosmic-ray cleaned <code class="docutils literal notranslate"><span class="pre">_crclean</span></code> image will be generated directly from
the input image, and a corresponding _crmask file will be written to
document detected pixels affected by cosmic-rays.</p>
</dd>
<dt><strong>driz_cr_snr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of floats (Default = ‘3.5 3.0’)</span></dt>
<dd><p class="first last">The values for this parameter specify the signal-to-noise ratios for the
<code class="docutils literal notranslate"><span class="pre">driz_cr</span></code> task to be used in detecting cosmic rays. See the help file
for <code class="docutils literal notranslate"><span class="pre">driz_cr</span></code> for further discussion of this parameter.</p>
</dd>
<dt><strong>driz_cr_grow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 1)</span></dt>
<dd><p class="first last">The radius, in pixels, around each detected cosmic-ray, in which more
stringent detection criteria for additional cosmic rays will be used.</p>
</dd>
<dt><strong>driz_cr_ctegrow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = 0)</span></dt>
<dd><p class="first last">Length, in pixels, of the CTE tail that should be masked in the drizzled
output.</p>
</dd>
<dt><strong>driz_cr_scale</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘1.2 0.7’)</span></dt>
<dd><p class="first last">Scaling factor applied to the derivative in <code class="docutils literal notranslate"><span class="pre">driz_cr</span></code> when detecting
cosmic-rays. See the help file for <code class="docutils literal notranslate"><span class="pre">driz_cr</span></code> for further discussion of
this parameter.</p>
</dd>
<dt><strong>**STEP 7: DRIZZLE FINAL COMBINED IMAGE**</strong></dt>
<dd></dd>
<dt><strong>driz_combine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = Yes)</span></dt>
<dd><p class="first last">This parameter specifies whether or not to drizzle each input image onto
the final output image. This applies the generated cosmic-ray masks
to the input images and creates a final, cleaned,
distortion-corrected image.</p>
</dd>
<dt><strong>final_wht_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{‘EXP’, ‘ERR’, ‘IVM’} (Default = ‘EXP’)</span></dt>
<dd><p class="first">Specify the type of weighting image to apply with the bad pixel mask for
the final drizzle step.  The options for this parameter include:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">'EXP'</span></code>: The default of <code class="docutils literal notranslate"><span class="pre">'EXP'</span></code> indicates that the images
will be weighted according to their exposure time, which is the
standard behavior for drizzle. This weighting is a good approximation
in the regime where the noise is dominated by photon counts from the
sources, while contributions from sky background, read-noise and dark
current are negligible. This option is provided as the default since
it produces reliable weighting for all types of data, including older
instruments (eg., <code class="docutils literal notranslate"><span class="pre">WFPC2</span></code>), where more sophisticated options
may not be available.</li>
<li><code class="docutils literal notranslate"><span class="pre">'ERR'</span></code>: Specifying <code class="docutils literal notranslate"><span class="pre">'ERR'</span></code> is an alternative for <code class="docutils literal notranslate"><span class="pre">ACS</span></code>
and <code class="docutils literal notranslate"><span class="pre">STIS</span></code> data. In these cases, the final drizzled images will
be weighted according to the inverse variance of each pixel in the
input exposure files, calculated from the error array data extension
that is in each calibrated input exposure file. This array is
exposure time dependent, and encapsulates all of the noise sources
in each exposure including read-noise, dark current, sky background,
and Poisson noise from the sources themselves. For <code class="docutils literal notranslate"><span class="pre">WFPC2</span></code>,
the <code class="docutils literal notranslate"><span class="pre">ERR</span></code> array is not produced during the calibration process,
and therefore is not a viable option. We advise extreme caution when
selecting the <code class="docutils literal notranslate"><span class="pre">'ERR'</span></code> option, since the nature of this weighting
scheme can introduce photometric discrepancies in sharp unresolved
sources, although these effects are minimized for sources with
gradual variations between pixels. The “EXP” weighting option does
not suffer from these effects, and is therefore the recommended
option.</li>
<li><code class="docutils literal notranslate"><span class="pre">'IVM'</span></code>: Specifying <code class="docutils literal notranslate"><span class="pre">'IVM'</span></code> allows the user to either supply
their own inverse-variance weighting map, or allow <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>
to generate one automatically on-the-fly during the final drizzle
step. This parameter option may be necessary for specific purposes.
For example, to create a drizzled weight file for software such as
<code class="docutils literal notranslate"><span class="pre">SExtractor</span></code>, it is expected that a weight image containing all
of the background noise sources (sky level, read-noise, dark current,
etc), but not the Poisson noise from the objects themselves will
be available. The user can create the inverse variance images and
then specify their names using the <code class="docutils literal notranslate"><span class="pre">input</span></code> parameter for
<code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> to specify an ‘&#64;file’. This would be a single
<code class="docutils literal notranslate"><span class="pre">ASCII</span></code> file containing the list of input calibrated exposure
filenames (one per line), with a second column containing the name
of the <code class="docutils literal notranslate"><span class="pre">IVM</span></code> file corresponding to each calibrated exposure.
Each <code class="docutils literal notranslate"><span class="pre">IVM</span></code> file must have the same file format as the input file,
and if provided as multi-extension <code class="docutils literal notranslate"><span class="pre">FITS</span></code> files (e.g., <code class="docutils literal notranslate"><span class="pre">ACS</span></code>
or <code class="docutils literal notranslate"><span class="pre">STIS</span></code> data) then the <code class="docutils literal notranslate"><span class="pre">IVM</span></code> extension must have the
<code class="docutils literal notranslate"><span class="pre">EXTNAME</span></code> of <code class="docutils literal notranslate"><span class="pre">'IVM'</span></code>. If no <code class="docutils literal notranslate"><span class="pre">IVM</span></code> files are specified on input,
then <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> will rely on the flat-field reference file and
computed dark value from the image header to automatically generate
an <code class="docutils literal notranslate"><span class="pre">IVM</span></code> file specific to each exposure.</li>
</ul>
</div></blockquote>
</dd>
<dt><strong>final_kernel</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{‘square’, ‘point’, ‘gaussian’, ‘turbo’, ‘tophat’, ‘lanczos3’} (Default = ‘square’)</span></dt>
<dd><p class="first">This parameter specifies the form of the kernel function used to distribute
flux onto the separate output images, for the initial separate drizzling
operation only. The value options for this parameter include:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">'square'</span></code>: original classic drizzling kernel</li>
<li><code class="docutils literal notranslate"><span class="pre">'point'</span></code>: this kernel is a point so each input pixel can only
contribute to the single pixel that is closest to the output
position. It is equivalent to the limit as <code class="docutils literal notranslate"><span class="pre">pixfrac-&gt;0</span></code>, and is
very fast.</li>
<li><code class="docutils literal notranslate"><span class="pre">'gaussian'</span></code>: this kernel is a circular gaussian, measured
in input pixels, with a FWHM value equal to the value of <code class="docutils literal notranslate"><span class="pre">pixfrac</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">'turbo'</span></code>: this is similar to kernel=”square”, except that
the box is always the same shape and size on the output grid,
and is always aligned with the <code class="docutils literal notranslate"><span class="pre">X</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code> axes. This may result
in a significant speed increase.</li>
<li><code class="docutils literal notranslate"><span class="pre">'tophat'</span></code>: this kernel is a circular “top hat” shape of width
<code class="docutils literal notranslate"><span class="pre">pixfrac</span></code>. It effects only output pixels within a radius of
<code class="docutils literal notranslate"><span class="pre">pixfrac/2</span></code> from the output position.</li>
<li><code class="docutils literal notranslate"><span class="pre">'lanczos3'</span></code>: a Lanczos style kernel, extending a radius of
3 pixels from the center of the detection. The Lanczos kernel is
a damped and bounded form of the “sinc” interpolator, and is very
effective for resampling single images when <code class="docutils literal notranslate"><span class="pre">scale=pixfrac=1</span></code>.
It leads to less resolution loss than other kernels, and typically
results in reduced correlated noise in outputs.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">'lanczos3'</span></code> kernel tends to result in much slower
processing as compared to other kernel options. This option
should never be used for pixfrac != 1.0, and is not recommended
for <code class="docutils literal notranslate"><span class="pre">scale!=1.0</span></code>.</p>
</div>
</div></blockquote>
<p class="last">The default for this step is <code class="docutils literal notranslate"><span class="pre">'turbo'</span></code> since it is much faster
than <code class="docutils literal notranslate"><span class="pre">'square'</span></code>, and it is quite satisfactory for the purposes
of generating the median image. More information about the different
kernels can be found in the help file for the drizzle task.</p>
</dd>
<dt><strong>final_wt_scl</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = exptime)</span></dt>
<dd><p class="first last">This parameter specifies the weighting factor for input image. If
<code class="docutils literal notranslate"><span class="pre">final_wt_scl=exptime</span></code>, then the scaling value will be set equal to
the exposure time found in the image header. The use of the default value
is recommended for producing optimal behavior for most scenarious.
It is possible to set <code class="docutils literal notranslate"><span class="pre">wt_scl='expsq'</span></code> for weighting by the square of
the exposure time, which is optimal for read-noise dominated images.</p>
</dd>
<dt><strong>final_pixfrac</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = 1.0)</span></dt>
<dd><p class="first last">Fraction by which input pixels are “shrunk” before being drizzled onto
the output image grid, given as a real number between 0 and 1.
This specifies the size of the footprint, or “dropsize”, of a pixel in
units of the input pixel size. If pixfrac is set to less than 0.001,
the kernel parameter will be reset to <code class="docutils literal notranslate"><span class="pre">'point'</span></code> for more efficient
processing. In the step of drizzling each input image onto a separate
output image, the default value of 1.0 is best in order to ensure that
each output drizzled image is fully populated with pixels from the input
image. For more information, see the help for the ‘drizzle’ task.</p>
</dd>
<dt><strong>final_fillval</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">The value for this parameter is to be assigned to the output pixels that
have zero weight or which do not receive flux from any input pixels during
drizzling. This parameter corresponds to the <code class="docutils literal notranslate"><span class="pre">fillval</span></code> parameter of the
<code class="docutils literal notranslate"><span class="pre">drizzle</span></code> task. If the default of <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> is used, and if the weight in
both the input and output images for a given pixel are zero, then
the output pixel will be set to the value it would have had if the input
had a non-zero weight. Otherwise, if a numerical value is provided
(e.g. 0), then these pixels will be set to that numerical value.</p>
</dd>
<dt><strong>final_bits</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, str, or None (Default = 0)</span></dt>
<dd><p class="first last">Integer sum for all of the <code class="docutils literal notranslate"><span class="pre">DQ</span></code> bit values from the input image’s <code class="docutils literal notranslate"><span class="pre">DQ</span></code>
array that should be considered ‘good’ when building the weight mask.
This can also be used to reset pixels to good if they had been flagged
as cosmic rays during a previous run of <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>, by adding the
value 4096 for <code class="docutils literal notranslate"><span class="pre">ACS</span></code> and <code class="docutils literal notranslate"><span class="pre">WFPC2</span></code> data. For possible input formats,
see the description for <code class="docutils literal notranslate"><span class="pre">sky_bits</span></code> parameter.</p>
</dd>
<dt><strong>final_units</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘cps’)</span></dt>
<dd><p class="first last">This parameter determines the units of the final drizzle-combined image,
and can either be <code class="docutils literal notranslate"><span class="pre">'counts'</span></code> or <code class="docutils literal notranslate"><span class="pre">'cps'</span></code>. It is passed through to
<code class="docutils literal notranslate"><span class="pre">drizzle</span></code> in the final drizzle step.</p>
</dd>
<dt><strong>**STEP 7a: CUSTOM WCS FOR FINAL OUTPUT**</strong></dt>
<dd></dd>
<dt><strong>final_wcs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (Default = No)</span></dt>
<dd><p class="first last">Obtain the <code class="docutils literal notranslate"><span class="pre">WCS</span></code> solution from a user-designated reference image?</p>
</dd>
<dt><strong>final_refimage</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first last">Reference image from which a <code class="docutils literal notranslate"><span class="pre">WCS</span></code> solution can be obtained.
If no extension is specified (such as ‘sci,1’ or ‘4’), then
<code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> will automatically look for the <strong>first</strong> extension which
contains a valid <code class="docutils literal notranslate"><span class="pre">HSTWCS</span></code> object to read in as the <code class="docutils literal notranslate"><span class="pre">WCS</span></code>. Otherwise,
the user can explicitly provide the extension name for multi-extension
<code class="docutils literal notranslate"><span class="pre">FITS</span></code> files.</p>
</dd>
<dt><strong>final_rot</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Position Angle of output image’s Y-axis relative to North. A value of 0.0
would orient the final output image to be North up. The default of <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>
specifies that the images will not be rotated, but will instead be drizzled
in the default orientation for the camera with the x and y axes of
the drizzled image corresponding approximately to the detector axes.
This conserves disk space, as these single drizzled images are only used
in the intermediate step of creating a median image.</p>
</dd>
<dt><strong>final_scale</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Linear size of the output pixels in arcseconds/pixel for each separate
drizzled image (used in creating the median for cosmic ray rejection).
The default value of None specifies that the undistorted pixel scale for
the first input image will be used as the pixel scale for all the output
images.</p>
</dd>
<dt><strong>final_outnx</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = None)</span></dt>
<dd><p class="first last">Size, in pixels, of the X axis in the output images that each input will
be drizzled onto. If no value is specified, the smallest size that can
accommodate the full dithered field will be used.</p>
</dd>
<dt><strong>final_outny</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (Default = None)</span></dt>
<dd><p class="first last">Size, in pixels, of the Y axis in the output images that each input will
be drizzled onto. If no value is specified, the smallest size that can
accommodate the full dithered field will be used.</p>
</dd>
<dt><strong>final_ra</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Right ascension (in decimal degrees) specifying the center of the output
image. If this value is not designated, the center will automatically
be calculated based on the distribution of image dither positions.</p>
</dd>
<dt><strong>final_dec</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Declination (in decimal degrees) specifying the center of the output image.
If this value is not designated, the center will automatically be
calculated based on the distribution of image dither positions.</p>
</dd>
<dt><strong>**INSTRUMENT PARAMETERS**</strong></dt>
<dd></dd>
<dt><strong>gain</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Value used to override instrument specific default gain values. The value
is assumed to be in units of electrons/count.  This parameter should not
be populated if the <code class="docutils literal notranslate"><span class="pre">gainkeyword</span></code> parameter is in use.</p>
</dd>
<dt><strong>gainkeyword</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first last">Keyword used to specify a value, which is used to override the instrument
specific default gain values. The value is assumed to be in units
of electrons/count. This parameter should not be populated if the <code class="docutils literal notranslate"><span class="pre">gain</span></code>
parameter is in use.</p>
</dd>
<dt><strong>rdnoise</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Value used to override instrument specific default readnoise values.
The value is assumed to be in units of electrons. This parameter should
not be populated if the <code class="docutils literal notranslate"><span class="pre">rnkeyword</span></code> parameter is in use.</p>
</dd>
<dt><strong>rnkeyword</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first last">Keyword used to specify a value, which is used to override the instrument
specific default readnoise values. The value is assumed to be in units
of electrons. This parameter should not be populated if the <code class="docutils literal notranslate"><span class="pre">rdnoise</span></code>
parameter is in use.</p>
</dd>
<dt><strong>exptime</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (Default = None)</span></dt>
<dd><p class="first last">Value used to override default exposure time image header values.
The value is assumed to be in units of seconds.  This parameter should not
be populated if the <code class="docutils literal notranslate"><span class="pre">expkeyword</span></code> parameter is in use.</p>
</dd>
<dt><strong>expkeyword</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = ‘’)</span></dt>
<dd><p class="first last">Keyword used to specify a value, which is used to override the default
exposure time image header values.  The value is assumed to be in units
of seconds. This parameter should not be populated if the <code class="docutils literal notranslate"><span class="pre">exptime</span></code>
parameter is in use.</p>
</dd>
<dt><strong>**ADVANCED PARAMETERS AVAILABLE FROM COMMAND LINE**</strong></dt>
<dd></dd>
<dt><strong>updatewcs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool  (Default = No)</span></dt>
<dd><p class="first">This parameter specifies whether the <code class="docutils literal notranslate"><span class="pre">WCS</span></code> keywords are to be updated by
running updatewcs on the input data, or left alone. The update performed
by updatewcs not only recomputes the <code class="docutils literal notranslate"><span class="pre">WCS</span></code> based on the currently
used <code class="docutils literal notranslate"><span class="pre">IDCTAB</span></code>, but also populates the header with
the <code class="docutils literal notranslate"><span class="pre">SIP</span></code> coefficients. For <code class="docutils literal notranslate"><span class="pre">ACS/WFC</span></code> images, the time-dependence
correction will also be applied to the <code class="docutils literal notranslate"><span class="pre">WCS</span></code> and <code class="docutils literal notranslate"><span class="pre">SIP</span></code> keywords.
This parameter should be set to <code class="docutils literal notranslate"><span class="pre">'No'</span></code> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>) when the <code class="docutils literal notranslate"><span class="pre">WCS</span></code>
keywords have been carefully set by some other method, and need to be
passed through to drizzle ‘as is’, otherwise those updates will be
over-written by this update.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This parameter was preserved in the API for compatibility purposes with
existing user processing pipe-lines. However, it has been removed from
the <code class="docutils literal notranslate"><span class="pre">TEAL</span></code> interface because it is easy to have it set to <code class="docutils literal notranslate"><span class="pre">'Yes'</span></code>
(especially between consecutive runs of <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code>) with
potentially disastrous effects on input image <code class="docutils literal notranslate"><span class="pre">WCS</span></code> (for example it
could wipe-out previously aligned <code class="docutils literal notranslate"><span class="pre">WCS</span></code>).</p>
</div>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="adrizzle.html#module-drizzlepac.adrizzle" title="drizzlepac.adrizzle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">drizzlepac.adrizzle</span></code></a></dt>
<dd>Apply the ‘drizzle’ algorithm to the images</dd>
<dt><a class="reference internal" href="ablot.html#module-drizzlepac.ablot" title="drizzlepac.ablot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">drizzlepac.ablot</span></code></a></dt>
<dd>Apply the ‘blot’ algorithm to drizzled images</dd>
<dt><a class="reference internal" href="sky.html#module-drizzlepac.sky" title="drizzlepac.sky"><code class="xref py py-obj docutils literal notranslate"><span class="pre">drizzlepac.sky</span></code></a></dt>
<dd>Perform sky subtraction</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">stsci.skypac.skymatch</span></code></dt>
<dd>Sky computation and equalization</dd>
<dt><a class="reference internal" href="median.html#module-drizzlepac.createMedian" title="drizzlepac.createMedian"><code class="xref py py-obj docutils literal notranslate"><span class="pre">drizzlepac.createMedian</span></code></a></dt>
<dd>Create a median combined image from a set of drizzled images</dd>
<dt><a class="reference internal" href="drizcr.html#module-drizzlepac.drizCR" title="drizzlepac.drizCR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">drizzlepac.drizCR</span></code></a></dt>
<dd>Identify cosmic-rays by comparing blotted, median images to the original input images.</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>Something to keep in mind is that the full <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> interface will
make backup copies of your original files and place them in the
<code class="docutils literal notranslate"><span class="pre">'OrIg_files'</span></code> directory of you current working directory.</p>
<p>All calibrated input images must have been updated using
<code class="xref py py-obj docutils literal notranslate"><span class="pre">updatewcs</span></code> from the <code class="docutils literal notranslate"><span class="pre">STWCS</span></code> package, to include the full
distortion model in the header. Alternatively, one can set
<code class="xref py py-obj docutils literal notranslate"><span class="pre">updatewcs</span></code> parameter to <a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> when running either <code class="xref py py-obj docutils literal notranslate"><span class="pre">TweakReg</span></code>
or <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> from command line (Python interpreter)
<strong>the first time</strong> on such images.</p>
<p class="rubric">Examples</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AstroDrizzle</span></code> task can be run from either the <code class="docutils literal notranslate"><span class="pre">TEAL</span></code> GUI or from the
command-line using <code class="docutils literal notranslate"><span class="pre">PyRAF</span></code> or Python. These examples illustrate the various
syntax options available.</p>
<p><strong>Example 1:</strong>  Drizzle a set of calibrated (<code class="docutils literal notranslate"><span class="pre">_flt.fits</span></code>) images using
mostly default parameters.  Select the ‘World Coordinate System’ keyword
to the updated solution computed from <code class="xref py py-obj docutils literal notranslate"><span class="pre">tweakreg</span></code>.  When combining images,
ignore pixel flags of 64 and 32 in the DQ array of the (<code class="docutils literal notranslate"><span class="pre">_flt.fits</span></code>)
images.  Align the final product such that North is
up, and set the final pixel scale to 0.05 arcseconds/pixel.</p>
<ol class="arabic">
<li><p class="first">Run the task from <code class="docutils literal notranslate"><span class="pre">PyRAF</span></code> using the <code class="docutils literal notranslate"><span class="pre">TEAL</span></code> GUI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">drizzlepac</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">epar</span> <span class="n">astrodrizzle</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the task from <code class="docutils literal notranslate"><span class="pre">PyRAF</span></code> using the command line.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">drizzlepac</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">drizzlepac</span> <span class="k">import</span> <span class="n">astrodrizzle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">astrodrizzle</span><span class="o">.</span><span class="n">AstroDrizzle</span><span class="p">(</span><span class="s1">&#39;*flt.fits&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;final&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">wcskey</span><span class="o">=</span><span class="s1">&#39;TWEAK&#39;</span><span class="p">,</span> <span class="n">driz_sep_bits</span><span class="o">=</span><span class="s1">&#39;64,32&#39;</span><span class="p">,</span> <span class="n">final_wcs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">final_scale</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">final_rot</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, run the same task from the PyRAF command line, but specify all
parameters in a config file named <code class="docutils literal notranslate"><span class="pre">myparam.cfg</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">astrodrizzle</span><span class="o">.</span><span class="n">AstroDrizzle</span><span class="p">(</span><span class="s1">&#39;*flt.fits&#39;</span><span class="p">,</span> <span class="n">configobj</span><span class="o">=</span><span class="s1">&#39;myparam.cfg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the task directly from Python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">drizzlepac</span> <span class="k">import</span> <span class="n">astrodrizzle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">astrodrizzle</span><span class="o">.</span><span class="n">AstroDrizzle</span><span class="p">(</span><span class="s1">&#39;*flt.fits&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;final&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">wcskey</span><span class="o">=</span><span class="s1">&#39;TWEAK&#39;</span><span class="p">,</span> <span class="n">driz_sep_bits</span><span class="o">=</span><span class="s1">&#39;64,32&#39;</span><span class="p">,</span> <span class="n">final_wcs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">final_scale</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">final_rot</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Help can be accessed via the “Help” pulldown menu in the <code class="docutils literal notranslate"><span class="pre">TEAL</span></code> GUI.
It can also be accessed from the <code class="docutils literal notranslate"><span class="pre">PyRAF</span></code> command-line and saved
to a text file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">drizzlepac</span> <span class="k">import</span> <span class="n">astrodrizzle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">astrodrizzle</span><span class="o">.</span><span class="n">help</span><span class="p">()</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">astrodrizzle</span><span class="o">.</span><span class="n">help</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;help.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">page</span> <span class="n">help</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</li>
</ol>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="imageobject.html" class="btn btn-neutral float-right" title="imageObject Classes" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to drizzlepac’s API documentation!" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Warren Hack, Nadia Dencheva, Chris Sontag, Megan Sosey, Michael Droettboom, Mihai Cara.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.2.6 (2018-11-02 15:37:13 -0400)',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>