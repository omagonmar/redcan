

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Updatenpol &mdash; DrizzlePac 2.2.6 (2018-11-02 15:37:13 -0400) documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/stsci.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/stsci.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="DrizzlePac 2.2.6 (2018-11-02 15:37:13 -0400) documentation" href="index.html"/>
        <link rel="next" title="Running Astrodrizzle" href="runastrodriz.html"/>
        <link rel="prev" title="skytopix: Coordinate transformation from sky coordinates" href="skytopix.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
            <a href="index.html" class="icon icon-home"> DrizzlePac
            
            <img src="_static/stsci_pri_combo_mark_white.png" class="logo" />
          </a>

          
            
            
              <div class="version">
                2.2.6
              </div>
            
          
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
  
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="astrodrizzle.html">Primary User Interface: AstroDrizzle()</a></li>
<li class="toctree-l1"><a class="reference internal" href="imageobject.html">imageObject Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Step 1: Process Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="static.html">Step 2: Generate a Static Mask</a></li>
<li class="toctree-l1"><a class="reference internal" href="sky.html">Step 3: Subtracting the Sky</a></li>
<li class="toctree-l1"><a class="reference internal" href="adrizzle.html">Step 4 and 8: Drizzling the Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="median.html">Step 5: Create a Median Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="ablot.html">Step 6: Blotting the Median Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="drizcr.html">Step 7: Cosmic-ray identification</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="tweakback.html">Tweakback</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">LICENSE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">DrizzlePac Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tweakreg.html">TWEAKREG: Alignment of Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="refimagefindpars.html">Refmagefindpars: Source finding parameters for the reference image</a></li>
<li class="toctree-l1"><a class="reference internal" href="imagefindpars.html">Imagefindpars: Source finding parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="image.html">Image Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="catalogs.html">Classes to manage Catalogs and WCS’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="wcscorr.html">Functions to Manage WCS Table Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="wcscorr.html#functions-to-manage-legacy-opus-wcs-keywords-in-the-wcs-table">Functions to Manage Legacy OPUS WCS Keywords in the WCS Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="tweakutils.html">TWEAKUTILS: Utility Functions for Tweakreg</a></li>
<li class="toctree-l1"><a class="reference internal" href="updatehdr.html">UPDATEHDR: Functions for Updating WCS with New Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapreg.html">Region mapping for TweakReg</a></li>
<li class="toctree-l1"><a class="reference internal" href="photeq.html">Photometric equalization for AstroDrizzle</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pixtopix.html">pixtopix: Coordinate transformation to/from drizzled images</a></li>
<li class="toctree-l1"><a class="reference internal" href="pixtosky.html">pixtosky: Coordinate transformation to sky coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="skytopix.html">skytopix: Coordinate transformation from sky coordinates</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Updatenpol</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="runastrodriz.html">Running Astrodriz</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">DrizzlePac</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Updatenpol</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/updatenpol.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="updatenpol">
<span id="id1"></span><h1>Updatenpol<a class="headerlink" href="#updatenpol" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-drizzlepac.updatenpol"></span><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">updatenpol</span></code>: Update the header of ACS file(s) with the names of new
<code class="docutils literal notranslate"><span class="pre">NPOLFILE</span></code> and <code class="docutils literal notranslate"><span class="pre">D2IMFILE</span></code> reference files for use with the
C version of MultiDrizzle (astrodrizzle).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body"><p class="first">Warren Hack</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">License:</th><td class="field-body"><p class="first"><a class="reference internal" href="LICENSE.html"><span class="doc">LICENSE</span></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><p class="first">This task can be run from the operating system command line with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">updatenpol</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="nb">input</span> <span class="p">[</span><span class="n">refdir</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Command-line Options:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><dl class="first last docutils">
<dt><a class="reference external" href="https://docs.python.org/2/library/functions.html#input" title="(in Python v2.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a></dt>
<dd><p class="first last">The specification of the files to be updated, either as a single filename,
an ASN table name, or wild-card specification
of a list of files.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">refdir</span></code></dt>
<dd><p class="first last">The name of the directory containing all the new reference files
(<code class="docutils literal notranslate"><span class="pre">*_npl.fits</span></code> and <code class="docutils literal notranslate"><span class="pre">*_d2i.fits</span></code> files).
If no directory is given, it will look in <code class="xref py py-obj docutils literal notranslate"><span class="pre">jref$</span></code> by default.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-h</span></code></dt>
<dd><p class="first last">Print the help (this text).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-l</span></code></dt>
<dd><p class="first last">If specified, copy NPOLFILEs and D2IMFILEs to local directory
for use with the input files.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-i</span></code></dt>
<dd><p class="first last">If specified, the program will interactively request the exact
names of the <code class="docutils literal notranslate"><span class="pre">NPOLFILE</span></code> and <code class="docutils literal notranslate"><span class="pre">D2IMFILE</span></code> reference files to be used
for updating the header of each file. The value of ‘refdir’
will be ignored in interactive mode.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It will ask for the names of the <code class="docutils literal notranslate"><span class="pre">NPOLFILE</span></code> and <code class="docutils literal notranslate"><span class="pre">D2IMFILE</span></code> for
EACH separate INPUT file when the option <code class="xref py py-obj docutils literal notranslate"><span class="pre">-i</span></code> has been specified.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><p class="first">1. This command will update all the FLT files in the current directory
with the new <code class="docutils literal notranslate"><span class="pre">NPOLFILE</span></code> and <code class="docutils literal notranslate"><span class="pre">D2IMFILE</span></code> reference files found in the ‘myjref’
directory as defined in the environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>updatenpol *flt.fits myjref$
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Compatability with MultiDrizzle:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first last">The new version of <code class="docutils literal notranslate"><span class="pre">MultiDrizzle</span></code> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astrodrizzle)</span> <span class="pre">and</span> <span class="pre">`updatewcs</span></code>
only work with the new <code class="docutils literal notranslate"><span class="pre">NPOLFILE</span></code> reference file for the <code class="docutils literal notranslate"><span class="pre">DGEO</span></code> correction
(to replace the use of DGEOFILE).
In fact, <code class="xref py py-obj docutils literal notranslate"><span class="pre">astrodrizzle</span></code> has been extensively modified to
prompt the user with a very lengthy explanation on whether it should
stop and allow the user to update the header or continue without
applying the <code class="docutils literal notranslate"><span class="pre">DGEO</span></code> correction under circumstances when the <code class="docutils literal notranslate"><span class="pre">NPOLFILE</span></code>
keyword can not be found for ACS.</p>
</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="drizzlepac.updatenpol.find_d2ifile">
<code class="descclassname">drizzlepac.updatenpol.</code><code class="descname">find_d2ifile</code><span class="sig-paren">(</span><em>flist</em>, <em>detector</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/updatenpol.html#find_d2ifile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.updatenpol.find_d2ifile" title="Permalink to this definition">¶</a></dt>
<dd><p>Search a list of files for one that matches the detector specified.</p>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.updatenpol.find_npolfile">
<code class="descclassname">drizzlepac.updatenpol.</code><code class="descname">find_npolfile</code><span class="sig-paren">(</span><em>flist</em>, <em>detector</em>, <em>filters</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/updatenpol.html#find_npolfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.updatenpol.find_npolfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Search a list of files for one that matches the configuration
of detector and filters used.</p>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.updatenpol.getHelpAsString">
<code class="descclassname">drizzlepac.updatenpol.</code><code class="descname">getHelpAsString</code><span class="sig-paren">(</span><em>docstring=False</em>, <em>show_ver=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/updatenpol.html#getHelpAsString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.updatenpol.getHelpAsString" title="Permalink to this definition">¶</a></dt>
<dd><p>return useful help from a file in the script directory called
__taskname__.help</p>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.updatenpol.help">
<code class="descclassname">drizzlepac.updatenpol.</code><code class="descname">help</code><span class="sig-paren">(</span><em>file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/updatenpol.html#help"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.updatenpol.help" title="Permalink to this definition">¶</a></dt>
<dd><p>Print out syntax help for running astrodrizzle</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str (Default = None)</span></dt>
<dd><p class="first last">If given, write out help to the filename specified by this parameter
Any previously existing file with this name will be deleted before
writing out the help.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.updatenpol.run">
<code class="descclassname">drizzlepac.updatenpol.</code><code class="descname">run</code><span class="sig-paren">(</span><em>configobj=None</em>, <em>editpars=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/updatenpol.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.updatenpol.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Teal interface for running this code.</p>
</dd></dl>

<dl class="function">
<dt id="drizzlepac.updatenpol.update">
<code class="descclassname">drizzlepac.updatenpol.</code><code class="descname">update</code><span class="sig-paren">(</span><em>input</em>, <em>refdir='jref$'</em>, <em>local=None</em>, <em>interactive=False</em>, <em>wcsupdate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/drizzlepac/updatenpol.html#update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#drizzlepac.updatenpol.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates headers of files given as input to point to the new reference files
NPOLFILE and D2IMFILE required with the new C version of MultiDrizzle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string or list</span></dt>
<dd><dl class="first last docutils">
<dt>Name of input file or files acceptable forms:</dt>
<dd><ul class="first last simple">
<li>single filename with or without directory</li>
<li>&#64;-file</li>
<li>association table</li>
<li>python list of filenames</li>
<li>wildcard specification of filenames</li>
</ul>
</dd>
</dl>
</dd>
<dt><strong>refdir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to directory containing new reference files, either
environment variable or full path.</p>
</dd>
<dt><strong>local</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Specifies whether or not to copy new reference files to local
directory for use with the input files.</p>
</dd>
<dt><strong>interactive</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Specifies whether or not to interactively ask the user for the
exact names of the new reference files instead of automatically
searching a directory for them.</p>
</dd>
<dt><strong>updatewcs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Specifies whether or not to update the WCS information in this
file to use the new reference files.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This program requires access to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">jref$</span></code> directory in order
to evaluate the DGEOFILE specified in the input image header.
This evaluation allows the program to get the information it
needs to identify the correct NPOLFILE.</p>
</div>
<p>The use of this program now requires that a directory be set up with
all the new NPOLFILE and D2IMFILE reference files for ACS (a single
directory for all files for all ACS detectors will be fine, much like
jref).  Currently, all the files generated by the ACS team has initially
been made available at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">grp</span><span class="o">/</span><span class="n">hst</span><span class="o">/</span><span class="n">acs</span><span class="o">/</span><span class="n">lucas</span><span class="o">/</span><span class="n">new</span><span class="o">-</span><span class="n">npl</span><span class="o">/</span>
</pre></div>
</div>
<p>The one known limitation to how this program works comes from
confusion if more than 1 file could possibly be used as the new
reference file. This would only happen when NPOLFILE reference files
have been checked into CDBS multiple times, and there are several
versions that apply to the same detector/filter combination.  However,
that can be sorted out later if we get into that situation at all.</p>
<p class="rubric">Examples</p>
<ol class="arabic">
<li><p class="first">A set of associated images specified by an ASN file can be updated to use
the NPOLFILEs and D2IMFILE found in the local directory defined using
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">myjref$</span></code> environment variable under PyRAF using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;import updatenpol</span>
<span class="go">&gt;&gt;&gt;updatenpol.update(&#39;j8bt06010_asn.fits&#39;, &#39;myref$&#39;)</span>
</pre></div>
</div>
</li>
<li><p class="first">Another use under Python would be to feed it a specific list of files
to be updated using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">updatenpol</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s1">&#39;file1_flt.fits&#39;</span><span class="p">,</span><span class="s1">&#39;file2_flt.fits&#39;</span><span class="p">],</span><span class="s1">&#39;myjref$&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Files in another directory can also be processed using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">updatenpol</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;data$*flt.fits&#39;</span><span class="p">,</span><span class="s1">&#39;../new/ref/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="runastrodriz.html" class="btn btn-neutral float-right" title="Running Astrodrizzle" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="skytopix.html" class="btn btn-neutral" title="skytopix: Coordinate transformation from sky coordinates" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Warren Hack, Nadia Dencheva, Chris Sontag, Megan Sosey, Michael Droettboom, Mihai Cara.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.2.6 (2018-11-02 15:37:13 -0400)',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>