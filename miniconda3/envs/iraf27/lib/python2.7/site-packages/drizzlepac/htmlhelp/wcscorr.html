

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Functions to Manage WCS Table Extension &mdash; DrizzlePac 2.2.6 (2018-11-02 15:37:13 -0400) documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/stsci.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/stsci.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="DrizzlePac 2.2.6 (2018-11-02 15:37:13 -0400) documentation" href="index.html"/>
        <link rel="next" title="TWEAKUTILS: Utility Functions for Tweakreg" href="tweakutils.html"/>
        <link rel="prev" title="Classes to manage Catalogs and WCS’s" href="catalogs.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
            <a href="index.html" class="icon icon-home"> DrizzlePac
            
            <img src="_static/stsci_pri_combo_mark_white.png" class="logo" />
          </a>

          
            
            
              <div class="version">
                2.2.6
              </div>
            
          
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
  
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="astrodrizzle.html">Primary User Interface: AstroDrizzle()</a></li>
<li class="toctree-l1"><a class="reference internal" href="imageobject.html">imageObject Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Step 1: Process Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="static.html">Step 2: Generate a Static Mask</a></li>
<li class="toctree-l1"><a class="reference internal" href="sky.html">Step 3: Subtracting the Sky</a></li>
<li class="toctree-l1"><a class="reference internal" href="adrizzle.html">Step 4 and 8: Drizzling the Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="median.html">Step 5: Create a Median Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="ablot.html">Step 6: Blotting the Median Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="drizcr.html">Step 7: Cosmic-ray identification</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="tweakback.html">Tweakback</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">LICENSE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">DrizzlePac Release Notes</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tweakreg.html">TWEAKREG: Alignment of Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="refimagefindpars.html">Refmagefindpars: Source finding parameters for the reference image</a></li>
<li class="toctree-l1"><a class="reference internal" href="imagefindpars.html">Imagefindpars: Source finding parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="image.html">Image Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="catalogs.html">Classes to manage Catalogs and WCS’s</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Functions to Manage WCS Table Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="#functions-to-manage-legacy-opus-wcs-keywords-in-the-wcs-table">Functions to Manage Legacy OPUS WCS Keywords in the WCS Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="tweakutils.html">TWEAKUTILS: Utility Functions for Tweakreg</a></li>
<li class="toctree-l1"><a class="reference internal" href="updatehdr.html">UPDATEHDR: Functions for Updating WCS with New Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapreg.html">Region mapping for TweakReg</a></li>
<li class="toctree-l1"><a class="reference internal" href="photeq.html">Photometric equalization for AstroDrizzle</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pixtopix.html">pixtopix: Coordinate transformation to/from drizzled images</a></li>
<li class="toctree-l1"><a class="reference internal" href="pixtosky.html">pixtosky: Coordinate transformation to sky coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="skytopix.html">skytopix: Coordinate transformation from sky coordinates</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="updatenpol.html">Updatenpol</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="runastrodriz.html">Running Astrodriz</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">DrizzlePac</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Functions to Manage WCS Table Extension</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/wcscorr.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="functions-to-manage-wcs-table-extension">
<h1>Functions to Manage WCS Table Extension<a class="headerlink" href="#functions-to-manage-wcs-table-extension" title="Permalink to this headline">¶</a></h1>
<p>These functions provide the basic support for initializing,
creating and updating the WCS table extension which serves as
the archive of updates made to the WCS information in the image headers.</p>
<span class="target" id="module-stwcs.wcsutil.wcscorr"></span><dl class="function">
<dt id="stwcs.wcsutil.wcscorr.archive_wcs_file">
<code class="descclassname">stwcs.wcsutil.wcscorr.</code><code class="descname">archive_wcs_file</code><span class="sig-paren">(</span><em>image</em>, <em>wcs_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/wcscorr.html#archive_wcs_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.wcscorr.archive_wcs_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Update WCSCORR table with rows for each SCI extension to record the
newly updated WCS keyword values.</p>
</dd></dl>

<dl class="function">
<dt id="stwcs.wcsutil.wcscorr.create_wcscorr">
<code class="descclassname">stwcs.wcsutil.wcscorr.</code><code class="descname">create_wcscorr</code><span class="sig-paren">(</span><em>descrip=False</em>, <em>numrows=1</em>, <em>padding=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/wcscorr.html#create_wcscorr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.wcscorr.create_wcscorr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the basic definitions for a WCSCORR table.
The dtype definitions for the string columns are set to the maximum allowed so
that all new elements will have the same max size which will be automatically
truncated to this limit upon updating (if needed).</p>
<p>The table is initialized with rows corresponding to the OPUS solution
for all the ‘SCI’ extensions.</p>
</dd></dl>

<dl class="function">
<dt id="stwcs.wcsutil.wcscorr.delete_wcscorr_row">
<code class="descclassname">stwcs.wcsutil.wcscorr.</code><code class="descname">delete_wcscorr_row</code><span class="sig-paren">(</span><em>wcstab</em>, <em>selections=None</em>, <em>rows=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/wcscorr.html#delete_wcscorr_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.wcscorr.delete_wcscorr_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets all values in a specified row or set of rows to default values</p>
<p>This function will essentially erase the specified row from the table
without actually removing the row from the table. This avoids the problems
with trying to resize the number of rows in the table while preserving the
ability to update the table with new rows again without resizing the table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>wcstab: object</strong></dt>
<dd><p class="first last">PyFITS binTable object for WCSCORR table</p>
</dd>
<dt><strong>selections: dict</strong></dt>
<dd><p class="first last">Dictionary of wcscorr column names and values to be used to select
the row or set of rows to erase</p>
</dd>
<dt><strong>rows: int, list</strong></dt>
<dd><p class="first last">If specified, will specify what rows from the table to erase regardless
of the value of ‘selections’</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stwcs.wcsutil.wcscorr.find_wcscorr_row">
<code class="descclassname">stwcs.wcsutil.wcscorr.</code><code class="descname">find_wcscorr_row</code><span class="sig-paren">(</span><em>wcstab</em>, <em>selections</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/wcscorr.html#find_wcscorr_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.wcscorr.find_wcscorr_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of indices from the table (NOT HDU) ‘wcstab’ that matches the
selections specified by the user.</p>
<p>The row selection criteria must be specified as a dictionary with
column name as key and value(s) representing the valid desired row values.
For example, {‘wcs_id’:’OPUS’,’extver’:2}.</p>
</dd></dl>

<dl class="function">
<dt id="stwcs.wcsutil.wcscorr.init_wcscorr">
<code class="descclassname">stwcs.wcsutil.wcscorr.</code><code class="descname">init_wcscorr</code><span class="sig-paren">(</span><em>input</em>, <em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/wcscorr.html#init_wcscorr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.wcscorr.init_wcscorr" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will initialize the WCSCORR table if it is not already present,
and look for WCS keywords with a prefix of ‘O’ as the original OPUS
generated WCS as the initial row for the table or use the current WCS
keywords as initial row if no ‘O’ prefix keywords are found.</p>
<p>This function will NOT overwrite any rows already present.</p>
<p>This function works on all SCI extensions at one time.</p>
</dd></dl>

<dl class="function">
<dt id="stwcs.wcsutil.wcscorr.restore_file_from_wcscorr">
<code class="descclassname">stwcs.wcsutil.wcscorr.</code><code class="descname">restore_file_from_wcscorr</code><span class="sig-paren">(</span><em>image</em>, <em>id='OPUS'</em>, <em>wcskey=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/wcscorr.html#restore_file_from_wcscorr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.wcscorr.restore_file_from_wcscorr" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the values of the WCS from the WCSCORR based on ID specified by user.
The default will be to restore the original OPUS-derived values to the Primary WCS.
If wcskey is specified, the WCS with that key will be updated instead.</p>
</dd></dl>

<dl class="function">
<dt id="stwcs.wcsutil.wcscorr.update_wcscorr">
<code class="descclassname">stwcs.wcsutil.wcscorr.</code><code class="descname">update_wcscorr</code><span class="sig-paren">(</span><em>dest</em>, <em>source=None</em>, <em>extname='SCI'</em>, <em>wcs_id=None</em>, <em>active=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/wcscorr.html#update_wcscorr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.wcscorr.update_wcscorr" title="Permalink to this definition">¶</a></dt>
<dd><p>Update WCSCORR table with a new row or rows for this extension header. It
copies the current set of WCS keywords as a new row of the table based on
keyed WCSs as per Paper I Multiple WCS standard).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dest</strong> <span class="classifier-delimiter">:</span> <span class="classifier">HDUList</span></dt>
<dd><p class="first last">The HDU list whose WCSCORR table should be appended to (the WCSCORR HDU
must already exist)</p>
</dd>
<dt><strong>source</strong> <span class="classifier-delimiter">:</span> <span class="classifier">HDUList, optional</span></dt>
<dd><p class="first last">The HDU list containing the extension from which to extract the WCS
keywords to add to the WCSCORR table.  If None, the dest is also used
as the source.</p>
</dd>
<dt><strong>extname</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">The extension name from which to take new WCS keywords.  If there are
multiple extensions with that name, rows are added for each extension
version.</p>
</dd>
<dt><strong>wcs_id</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">The name of the WCS to add, as in the WCSNAMEa keyword.  If
unspecified, all the WCSs in the specified extensions are added.</p>
</dd>
<dt><strong>active: bool, optional</strong></dt>
<dd><p class="first last">When True, indicates that the update should reflect an update of the
active WCS information, not just appending the WCS to the file as a
headerlet</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stwcs.wcsutil.wcscorr.update_wcscorr_column">
<code class="descclassname">stwcs.wcsutil.wcscorr.</code><code class="descname">update_wcscorr_column</code><span class="sig-paren">(</span><em>wcstab</em>, <em>column</em>, <em>values</em>, <em>selections=None</em>, <em>rows=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/wcscorr.html#update_wcscorr_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.wcscorr.update_wcscorr_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the values in ‘column’ with ‘values’ for selected rows</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>wcstab: object</strong></dt>
<dd><p class="first last">PyFITS binTable object for WCSCORR table</p>
</dd>
<dt><strong>column: string</strong></dt>
<dd><p class="first last">Name of table column with values that need to be updated</p>
</dd>
<dt><strong>values: string, int, or list</strong></dt>
<dd><p class="first last">Value or set of values to copy into the selected rows for the column</p>
</dd>
<dt><strong>selections: dict</strong></dt>
<dd><p class="first last">Dictionary of wcscorr column names and values to be used to select
the row or set of rows to erase</p>
</dd>
<dt><strong>rows: int, list</strong></dt>
<dd><p class="first last">If specified, will specify what rows from the table to erase regardless
of the value of ‘selections’</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="functions-to-manage-legacy-opus-wcs-keywords-in-the-wcs-table">
<h1>Functions to Manage Legacy OPUS WCS Keywords in the WCS Table<a class="headerlink" href="#functions-to-manage-legacy-opus-wcs-keywords-in-the-wcs-table" title="Permalink to this headline">¶</a></h1>
<p>The previously released versions of <code class="docutils literal notranslate"><span class="pre">makewcs</span></code> provided
with <code class="xref py py-obj docutils literal notranslate"><span class="pre">MultiDrizzle</span></code> <em>archives</em> the original OPUS generated WCS
keywords using header keywords which have a prefix of “O”,
such as “OCRPIX1”.  In order to avoid overwriting or ignoring
these original values, these functions can be used to convert
the prefixed OPUS WCS keywords into WCS table entries compatible
with the new code.</p>
<p>Strictly to provide complete support for these OPUS keywords,
the code will also create, if the user desires, prefix “O” WCS
keywords from the alternate WCS FITS conventions OPUS keywords.
This would allow images processed using the new code only can
then be used with older versions of <code class="xref py py-obj docutils literal notranslate"><span class="pre">MultiDrizzle</span></code>, if the user
needs such compatibility.</p>
<span class="target" id="module-stwcs.wcsutil.convertwcs"></span><dl class="function">
<dt id="stwcs.wcsutil.convertwcs.archive_prefix_OPUS_WCS">
<code class="descclassname">stwcs.wcsutil.convertwcs.</code><code class="descname">archive_prefix_OPUS_WCS</code><span class="sig-paren">(</span><em>fobj</em>, <em>extname='SCI'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/convertwcs.html#archive_prefix_OPUS_WCS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.convertwcs.archive_prefix_OPUS_WCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies WCS keywords which were generated by OPUS and archived
using a prefix of ‘O’ for all ‘SCI’ extensions in the file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>fobj</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or <a class="reference external" href="http://docs.astropy.org/en/stable/io/fits/api/hdulists.html#astropy.io.fits.HDUList" title="(in Astropy v3.0.5)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.io.fits.HDUList</span></code></a></span></dt>
<dd><p class="first last">Filename or fits object of a file</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stwcs.wcsutil.convertwcs.create_prefix_OPUS_WCS">
<code class="descclassname">stwcs.wcsutil.convertwcs.</code><code class="descname">create_prefix_OPUS_WCS</code><span class="sig-paren">(</span><em>fobj</em>, <em>extname='SCI'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stwcs/wcsutil/convertwcs.html#create_prefix_OPUS_WCS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stwcs.wcsutil.convertwcs.create_prefix_OPUS_WCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates alternate WCS with a prefix of ‘O’ for OPUS generated WCS values
to work with old MultiDrizzle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>fobj</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or <a class="reference external" href="http://docs.astropy.org/en/stable/io/fits/api/hdulists.html#astropy.io.fits.HDUList" title="(in Astropy v3.0.5)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.io.fits.HDUList</span></code></a></span></dt>
<dd><p class="first last">Filename or fits object of a file</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>IOError:</strong></dt>
<dd><p class="first last">if input FITS object was not opened in ‘update’ mode</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tweakutils.html" class="btn btn-neutral float-right" title="TWEAKUTILS: Utility Functions for Tweakreg" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="catalogs.html" class="btn btn-neutral" title="Classes to manage Catalogs and WCS’s" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Warren Hack, Nadia Dencheva, Chris Sontag, Megan Sosey, Michael Droettboom, Mihai Cara.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.2.6 (2018-11-02 15:37:13 -0400)',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>