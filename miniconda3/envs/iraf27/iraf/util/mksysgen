#!/bin/csh -f
#

if (! $?iraf) then
    #echo ""
    #echo "Error:  You must have the iraf env variable defined !"
    #echo ""
    #exit 1

    set  iraf 	= $cwd/
endif

env | sort
pwd

alias NOTE 'echo XXXXXXXXXX;echo XXXXXXXXXX;echo XXXXXXXXXX; echo util/mksysgen stage \!* '

set  c_start	= `date`
/bin/rm -f spool */spool


NOTE mkclean

$iraf/util/mkclean				# clean old binaries

NOTE mkpkg.sh

cd $iraf/unix					# NOVOS bootstrap
eval `hlib/setup --csh --level core_build`
sh -x mkpkg.sh |& tee log.040.NOVOS-boot

NOTE mklibs

cd $iraf/vendor					# UR: build libs in vendor/
./mklibs |& tee log.050.00.vendor

NOTE mkpkg

cd $iraf/					# build NOVOS

env | sort
pwd

mkpkg |& tee log.060.NOVOS

NOTE mkpkg.sh again

cd $iraf/unix					# VOS bootstrap
eval `hlib/setup --csh --level core_build`  # repeat setup to pick up VOS libs
sh -x mkpkg.sh |& tee log.070.VOS

NOTE mkpkg again

cd $iraf/					# build core system
mkpkg |& tee log.080.core

NOTE noao

cd $iraf/noao					# build NOAO package
setenv noao $cwd/
mkpkg -p noao |& tee log.090.noao

NOTE vo

cd $iraf/vo					# build VO package
setenv vo $cwd/
mkpkg -p vo |& tee log.100.vo

NOTE 'end'

set  c_end	= `date`


echo ""
echo ""
echo ""
echo "Start:  $c_start"
echo "  End:  $c_end"
