#$Header: /home/pros/xray/xtiming/RCS/mkpkg,v 11.0 1997/11/06 16:45:27 prosb Exp $
#$Log: mkpkg,v $
#Revision 11.0  1997/11/06 16:45:27  prosb
#General Release 2.5
#
#Revision 9.0  1995/11/16  19:32:32  prosb
#General Release 2.4
#
#Revision 8.0  1994/06/27  17:37:35  prosb
#General Release 2.3.1
#
#Revision 7.0  93/12/27  19:04:24  prosb
#General Release 2.3
#
#Revision 6.0  93/05/24  16:54:55  prosb
#General Release 2.2
#
#Revision 5.2  93/05/20  10:14:24  mo
#MC	5/20/93		Add qpphase
#
#Revision 5.1  93/04/23  17:07:52  mo
#MC	4/23/93		Add the new kspltab and vartst tasks
#
#Revision 5.0  92/10/29  23:06:42  prosb
#General Release 2.1
#
#Revision 4.0  92/04/27  15:30:18  prosb
#General Release 2.0:  April 1992
#
#Revision 3.3  92/04/15  15:13:42  mo
#MC	4/15/92		Remove fakesrc and addsine - not working yet
#
#Revision 3.2  92/03/26  16:15:29  mo
#MC	3/26/92		Remove our cludgey qpiorewind routine, now
#			that IRAF 2.10 has fixed it.
#
#Revision 3.1  92/01/23  12:16:30  mo
#MC	1/23/92		include fakesrc and addsine tasks, also
#			force remake of timlib with relink command
#
#Revision 3.0  91/08/02  01:59:56  prosb
#General Release 1.1
#
#Revision 2.1  91/07/21  18:09:55  mo
#MC	7/21/91		Update for new package structure
#
#Revision 2.0  91/03/06  22:32:05  pros
#General Release 1.0
#
#
#	mkpkg for the xtiming directory
#

$call   relink
$exit

update:
#	@timlib
	$call relink
	$call install
	@timcor		#  This subpackage needs libtiming.a
	;


relink:
	$set    LIBS = "-lfft -lpros -ltbtables" 
	$update libpkg.a
	$update libtiming.a
	$omake  x_xtiming.x
	$omake  debug.x
	$link   x_xtiming.o debug.o libpkg.a libtiming.a $(LIBS) -o xx_xtiming.e
	;

install:
	$move   xx_xtiming.e xraybin$x_xtiming.e
	;

libtiming.a:
	@timlib
	;

libpkg.a:
	@ltcurv
	@fft
	@fold
        @kspltab
	@period
	@qpphase
	@timfilter
	@timplot
        @vartst
#	@addsine
#	@fakesrc
	;
