#$Header: /tmp_mnt/home/pros/xray/RCS/Revisions,v 5.43 93/05/21 01:47:30 dennis Exp Locker: prosb $
#$Log:	Revisions,v $
# Revision 5.43  93/05/21  01:47:30  dennis
# Recent DS work.
# 
# Revision 5.42  93/05/17  10:20:58  mo
# Mo's updates
# 
# Revision 5.41  93/05/14  00:33:21  dennis
# *** empty log message ***
# 
# Revision 5.40  93/05/05  15:00:37  janet
# jd updates
# 
# Revision 5.39  93/05/05  00:47:32  dennis
# regions bug fix
# 
# Revision 5.38  93/05/04  18:07:11  janet
# jd updates.
# 
# Revision 5.37  93/05/04  11:49:05  janet
# jd updates.
# 
# Revision 5.36  93/05/03  19:05:08  dennis
# Corrected integration of fixsaoreg with new regions library.
# 
# Revision 5.35  93/05/01  01:13:04  dennis
# *** empty log message ***
# 
# Revision 5.34  93/05/01  00:35:56  dennis
# *** empty log message ***
# 
# Revision 5.33  93/04/30  22:23:34  dennis
# *** empty log message ***
# 
# Revision 5.32  93/04/30  17:18:26  janet
# jd updates.
# 
# Revision 5.31  93/04/30  04:00:14  dennis
# Fixed 3 bugs found in testing regions rewrite.
# 
# Revision 5.30  93/04/27  17:45:49  dennis
# Region descriptor parser rewrite
# 
# Revision 5.29  93/04/16  17:43:02  dennis
# Corrected regions system's use of coordinate systems, by using PMIO.
# 
# Revision 5.28  93/04/07  16:09:47  janet
# jd updates.
# 
# Revision 5.27  93/04/01  17:14:05  orszak
# jso
# 
# Revision 5.26  93/04/01  09:22:24  orszak
# *** empty log message ***
# 
# Revision 5.25  93/03/12  17:14:00  janet
# *** empty log message ***
# 
# Revision 5.24  93/03/08  15:51:39  mo
# *** empty log message ***
# 
# Revision 5.23  93/03/05  01:38:40  dennis
# *** empty log message ***
# 
# Revision 5.22  93/03/03  14:08:32  mo
# *** empty log message ***
# 
# Revision 5.21  93/02/18  09:17:52  janet
# jd - updated with chiplot fix.
# 
# Revision 5.20  93/02/17  12:19:51  janet
# jd - imcontour update.
# 
# Revision 5.19  93/02/17  10:29:21  janet
# jd - added xexamine and bepos work done.
# 
# Revision 5.18  93/02/11  09:43:49  orszak
# jso
# 
# jso
# 
# Revision 5.17  93/01/30  13:25:10  prosb
# jso
# 
# Revision 5.16  93/01/29  18:28:39  dennis
# Corrections to regalgebra.hlp and reggeometry.hlp.
# 
# Revision 5.15  93/01/27  18:30:53  mo
# *** empty log message ***
# 
# Revision 5.14  93/01/26  17:38:37  prosb
# jso
# 
# Revision 5.13  93/01/22  11:59:09  mo
# current updates
# 
# Revision 5.12  93/01/12  10:52:41  mo
# MC updates
# 
# Revision 5.11  93/01/08  11:15:09  janet
# jd detect/xexamine updates.
# 
# Revision 5.10  93/01/04  15:53:32  janet
# JD - fft/timplot updates.
# 
# Revision 5.9  93/01/04  11:14:24  janet
# jd - updated imcontour to work on non-square images and with new wcslab code.
# 
# Revision 5.8  92/12/29  14:59:10  prosb
# jso
# 
# Revision 5.7  92/12/18  10:59:49  janet
# added latest timing updates.
# 
# Revision 5.6  92/12/01  16:44:43  janet
# JD's latest update.
# 
# Revision 5.5  92/12/01  16:38:47  mo
# MC	latest updates
# 
# Revision 5.4  92/11/24  12:26:18  janet
# *** empty log message ***
# 
# Revision 5.3  92/11/23  09:42:00  jmoran
# *** empty log message ***
# 
# Revision 5.2  92/11/19  17:21:17  mo
# MC latest updates
# 
# Revision 5.1  92/11/19  15:32:53  wendy
# Added Header & Log
# 
1.  /pros/xray/xdataio/fits2qp.x				MC 11/6/92
	Fixed fatal error for FITS files containing
no time attribute.

2.  /pros/xray/xdataio/ft_addparam.x				MC 11/6/92
	Updated to recognise FITS/OBJECT as QPOE/title
parameter.

3.  /pros/xray/ximages/qplist/qplist.x				MC 11/10/92
	Made the retrieval of 'title' parameter conditional
on testing for it's existence.

4.  /pros/xray/lib/coords/coord_eq.f				MC 11/16/92
	Moved all variable declarations before the
DATA statements, since SGI/IRIX compiler complained		

5.  /pros/xray/xtiming/timplot/timcoords.x			MC 11/16/92
	Corrected dimension in rparselims.  A third dimension
is attempted even when only 2 are present and SGI/IRIX
produced a fatal error here, since no space was allocated
for invalid 3rd value output

6.  pros/xray/ximages/doc/qpcopy.hlp				MC 11/16/92
	Added references to IMCOPY as per Feigelson's comment.

7.  /pros/xray/xspectral/qpspec.par				JSO 11/17/92
    /pros/xray/xspectral/doc/qpspec.hlp
	Added clearer comments on oah1 now that units are understood.

8. /pros/xray/xdataio/fits2qp/fits2qp.x				JM 11/20/92
	Added "call qpio_close(io)" to avert SEGV's (PANIC's) when
	running on FITS files with TIME but NO GTIs

9. /pros/xray/xspatial/bepos/imbepos.x				JD 11/24/92
	Changed 'bkcts' to 'bkcellcts' in imbepos.x.  
	There was a name conflict with 'bk_cts' variable.

10. /pros/xray/xplot/xexamine/*.x, *.h				JD 11/24/92
	Added Source Detection to xexamine.  's' key.

11. /pros/xray/ximages/qplist.par				MC 11/25/92
	Corrected the 'maximum' value for display

12. /pros/xray/xspatial/imcnts/imcnts.x				MC 11/30/92
	Fixed a bug that prohibited constant BKGDERR values
( Analogous to the constant BKGD problem attacked earlier )

13. /pros/xray/xplot/xexamine/xesubs.x, xesetup.x               JD 12/1/92
    /pros/xray/xplot/xexamine/xexamine.par
	Updated Auto-block factor and cellsize to user-defined
        (hidden) default parameters.  There initial values were 
        previously hardwired.  Updated help file.

14. /pros/xray/xtiming/timplot/*.x, timplot.h			JD 12/18/92
    /pros/xray/xtiming/ltcurv/*.x     
    /pros/xray/xtiming/fft/*.x, binpars.h
    /pros/xray/xtiming/timlib/*.x
	Updated to store and handle double precision BINLEN.
	Fixed chiplot bug as result.  All timing tasks storing 
	BINLEN store them as double.  

15.  /pros/xray/xplot/timplot/timplot.x, timsetup.x 		JD 12/18/92
	Restructured timplot main program to make it modular, 
	added new file timsetup.x with new subroutines.

15a. /pros/xray/xtiming/fft/get_distrib.x			MC 12/20/92
			    fft.x
			    bin_source.x
			    fft_table_out.x
			    pwr_table_out.x
			    bin_source.x
			    getbins.x
			    input_bins.x
	Added updates for normalized power significance thresholds
	as per Slane memo.  Also added parameters for additional
	'time' header parameters as per FDS enhancement request

16. /pros/xray/xlocal/einbb/einbb.par, sdfspec.par		JSO 12/29/92
	Moved parameters from einbb.par to sdfspec.par where they are used.

17. /pros/xray/xplot/imcontour/imcontour.x, 			JD 1/4/93
			       imc_utils.x, imc_subs.x
	Updated Imcontour to call New wcslab and changed pset parameter 
	to share wcslab wlpars parameters. removed gridpars. (imc_subs)  
	Updated Imcontour so that Tvimcontour matches display when
	contouring a non-square image. (imc_utils)
	Updated Imcontour so that default scale is based on the longest
	side of a non-square image. (imc_utils, imcontour)

18. /pros/xray/xtiming/fft/bin_source.x, ftp_table_out.x	JD 1/4/93
	Write keywords TIME, BEG_TIME, END_TIME as doubles
	Added ftp_dheader routine 
    /pros/xray/xtiming/timplot/timgraph.x		
	Added 3rd column to plot header for fft keywords 'tot valid
	sec' and 'fourier intv'.  Changed 'duration' to 'valid-time 
        span' (all plots).

19. /pros/xray/xspatial/detect/cellmap.cl, ldetect.cl		JD 1/8/93
	Added 6" detect cell size for ROSAT HRI
	Added 6" & 9" detect cell size for Einstein HRI

20. /pros/xray/xplot/xexamine/xsetup.cl, xesubs.cl		JD 1/8/93
	Added bkden overide param.  When set, the bkden task 
        won't run when detect is invoked from the task.

21.  /pros/xray/lib/qpcreate/qpcreate.x				MC 1/11/93
	Added 'calloc' for timefilt buffer in upqpoe210.  There
were many 'realloc's', but no alloc for non-standard QPOE files.

22.  /pros/xray/ximages/imcalc/imacts.x				MC 1/12/93
	/pros/xray/ximages/doc/imcalc.hlp
	Added 'hhh' and 'pl' as allowed image extensions.  The code
was only accepting the 'imh' extension, explicity.  (Reported by StSCI)

23. /pros/xray/xspectral/source/ipc_fold.x              JSO     1/22/93
        Corrected bug due to improper use of save'd variables. See bug
report submitted today.

24. /pros/xray/xspectral/source/pspc.h			JSO	1/24/93
	Changed the high threshhold from 240 to 247.

25.  /pros/xray/lib/qpcreate/uhead2qp.x			MC	1/28/93
			     rhead2qp.x
     /pros/xray/lib/pros/xhead.x
		 	dispqphead.x
	Fixed bug that overwrote MISSION and TELESCOPE string for
non-ROSAT/EINSTEIN data.  Set MISSION and TELESCOPE strings for
ROSAT/Einstein data.

26.  /pros/xray/lib/qpoe.h				MC	1/28/92
     /pros/xray/lib/qpcreate/tgr2qp.x
			     tsi2qp.x
			     qpcaddaux.x
    /pros/xray/lib/pros/tsi.x
			tgr.x
Added defintion of Einstein/IPC TSI records and added
code to derive them from TGR records.  QPADDAUX can do the conversion
in place with existing QPOE Files.  XPR2(qp,fits) will generate
them for future files

27.  /pros/xray/doc/regalgebra.hlp			DS	1/29/93
                    reggeometry.hlp
Error corrections, some significant, and copy-editing.

28. /pros/xray/xspectral/source/pspc.h			JSO	1/30/93
				pspc_fold.x			2/10/93
Corrected useage of filter fitting.  FIXED BUG.

29. /pros/xray/xspectral/source/output_fit.x		JSO	1/30/93
Corrected model output, re: bug 240

30. /pros/xray/xspectral/grid_plot.key			JSO	1/30/93
Added more information.

31. /pros/xray/xplot/xexamine/xesubs.x			JD      2/4/93
Added comments to menu as to where the cursor should
be when inputting key commands.

32. /pros/xray/xspatial/detect				JD      2/17/93
Added low statistics calculations in snrmap and bepos.
Added 1/2 pixel sao -> iraf correction to final pos.

33. /pros/xray/xplot/imcontour/imc_rddata.x		JD      2/17/93
Changed Error status to Printed Msg when input src list
is empty.  It now prints message and doesn't try to plot
sources for both ascii and table inputs.

34. /pros/xray/xtiming/timplot/tim_graph.x		JD      2/17/93
Updated to NOT write binlen when the value changed 
accross the data set.

35.  /pros/xray/xdataio/fits2qp/ft_mpe_head.x		MC	3/3/93
Added XS-RAPT and XS-DECPT values to the qpoe header
to match CRVAL1,2.  Otherwise MAKEVIG died.

36. /pros/xray/xspatial/fixsaoreg/cscan_saoreg.x	DS	3/5/93
Corrected conversion of measures of extension (radius, width, etc.).

37. /pros/xray/xproto/hkfilter/hkfilter.x		MC	3/8/93
Fixed the GTI calling sequence for the PROS 2.1 update
(This was missed for the 2.1 release )

38.  /pros/xray/xtiming/fft/get_distrib.x		MC	3/8/93
Corrected the calculation of the Nyquist Frequency
bin number, per Fred's (and FAP's) instructions.

39.  /pros/xray/xtiming/vartst		        	JD      3/12/93
     /pros/xray/xtiming/ksplot.cl
Added Vartst (KS & CvM tests) task, and ksplot task 
to timing package

40. /pros/xray/xspectral/doc/singlefit.hlp		JSO	4/1/93
			     fit.hlp
			     dofitplot.hlp
Made reference to energy index clearer (was actually
wrong for singlefit)

41. /pros/xray/xspectral/source/normalization.x		JSO	4/1/93
Changed spelling error.

42. /pros/xray/xtiming/timlib/fld_phots.x		JD      4/1/93
Fixed exposure binning when period and fold.

43. /pros/xray/xplot/xexamine/xesetup.x			JD      4/6/93
Fixed computation of block factor...Made min of 1.
Error came up in Einstein Slew data size (309x309)

44. /pros/xray/xspatial/detect/bepos/imbepos.x, 	JD      4/6/93
                                     bepos_out.x ...
Made bepos display=10 correspond to xexamine output, 
changed ra & dec windo display to hh:mm:ss.s, dd:mm:ss.s format,
updated format statements for xexamine case.

45.  /pros/xray/xplot/imcontour/imcontour.x		JD  	4/7/93
Updated to identify ascii list from table file for source position input.
Fix of Bug introduced with Tables upgrade to 1_2_2.

46.  /pros/xray/xplot/imcontour/clevparse.yy		JD    	4/7/93
Updated parser code skip '.' delimeter.  Fixed contour levels
in list with name like 'clev.lis'.  This line was in the code
but commented up, not sure if something will pop up, but I did
the tests I could think of and it looked better with the line in.

47.  /pros/xray/lib/regions/rgcreate.x			DS	4/16/93
Caused rg_imcreate() (and rg_pmcreate(), which is never used) to 
use PMIO instead of PLIO.  This corrects a long-standing error in 
using coordinate systems.

48. /pros/xray/lib/regions.h				DS	4/27/93
                   regparse.h
                   regparse2.h	[removed]
    /pros/xray/lib/regions/regcontrol.x		[new]
                           regparse.com
                           regparse.yy
                           regacts.x
                           regcpu.x
                           rgop.x
                           regnotes.x
                           rgcreate.x
                           mkpkg
                           regparse2.com	[removed]
                           regparse2.yy		[removed]
                           rgcoords.x		[removed]
    /pros/xray/lib/pros/mskopen.x
                        qpmask.x
                        mkpkg
    /pros/xray/lib/qpcreate/qpcdefs.x
                            nqpcdefs.x
                            mkpkg
    /pros/xray/lib/coords/precess.x
                          mkpkg
    /pros/xray/ximages/plcreate/plcreate.x
    /pros/xray/ximages/qplist/qplist.x
                              mkpkg
    /pros/xray/xspatial/imcnts/imcnts.h
                               imcnts.x
                               imcntsubs.x
    /pros/xray/xspatial/detect/bkden/bkden.x
                                     mkpkg
    /pros/xray/xspatial/isoreg/isoreg.x
                               mkpkg
    /pros/xray/xspatial/imdisp/imdisp.x
    /pros/xray/xspatial/improj/improj.x
                               mkpkg
    /pros/xray/xspectral/qpspec/init_qpoe.x
                                bin_qpoe.x
                                bn_routines.x
                                qpspec.x
                                mkpkg
    /pros/xray/xlocal/source/qppower.x
                             qpproj.x
                             qpmax.x
                             mkpkg
Major rewrite of the region descriptor processing system, and interfacing
all the tasks that use it to the new system.

49. /pros/xray/lib/qpoe.h				DS	4/30/93
    /pros/xray/lib/qpcreate/rhead2qp.x
Changed defined constant POINT to POINTED, to avoid collision with 
POINT defined in regions.h; some files use both qpoe.h and regions.h.

50. /pros/xray/xspatial/imcnts/imcntsubs.x		DS	4/30/93
Corrected error introduced in recent rewrite: Moved writing of newline 
out of a conditional statement in cnt_finaldisp(); it would cause a 
run-on line if the region was a .pl file with no descriptor in its header.

51. /pros/xray/lib/regions/rgellipse.x			DS	4/30/93
Corrected old error flushed out by regions rewrite: rg_ellipse() changed 
the value of the angle input parameter.

52. /pros/xray/xspatial/detect   			JD      4/30/92
Added new task Lmatchsrc to detect package.  Code in directory 
detect/ms; macro that runs the task in detect/lmatchsrc.cl.

53. /pros/xray/xspectral/source/obsparse.yy		DS	4/30/93
Changed lexical analyzer and grammar to allow file names to begin with
digits.

54. /pros/xray/lib/regions/regparse.yy			DS	4/30/93
Changed lexical analyzer to allow region descriptor file names to begin 
with upper or lower case b or j, followed by digits, as long as decoding 
the numeric string doesn't give a value between 1899 and 2101.

55. /pros/xray/xspatial/imcnts/imcnts.x			DS	4/30/93
Corrected bug noticed by John Moran that could have allowed closing of
background error files that hadn't been opened, due to uninitialized 
handle for one of them.

56. /pros/xray/xspatial/fixsaoreg/cscan_saoreg.x	DS	5/3/93
Corrected call to rg_lookup() that didn't have the new arg list.

57. /pros/xray/xspatial/fixsaoreg/mkpkg			DS	5/3/93
Corrected list of dependencies for both source files.

58. /pros/xray/xtiming/detect/ms/ms.x			JD      5/3/93
    /pros/xray/xtiming/detect/lmatchsrc.cl
Corrected filename error checking, had to strip name of filters
before doing string compare with reference qpoe name.
Added default file name using reference qpoe root for output file name.
Added columns descriptors to header of _mch.tab file.

59. /pros/xray/xspatial/detect/cellmap.cl		JD      5/4/93
Updated ROSAT PSPC pi bands to new defs.  Updated helps.

60. /pros/xray/xtiming/ksplot.cl			JD      5/4/93
Intermediate plot table changed to temp file that gets written
& deleted from users working directory.

61. /pros/xray/lib/regions/regacts.x			DS	5/4/93
    /pros/xray/lib/regions/regcontrol.x
    /pros/xray/xspectral/qpspec/bn_routines.x
Corrected errors in handling shape (FIELD) with no arguments.

62. /pros/xray/xtiming/timfilter/timfilter.x		JD      5/5/93
    /pros/xray/lib/pros/times.x
Fixed timfilter to skip writing output file when name 'none' is input. 

63. /pros/xray/xplot/xexamine.par			JD     5/5/93
Changed default bkden region from "circle 128 128 7.5'" to "default".
Default takes the center from the image file, thus preventing errors
of a hardwired pixel positions.

64. /pros/xray/xspatial/detect/detmkreg                 JD     5/6/93
Added option to make a regions file using match output tables.

65. /pros/xray/lib/pros/mskopen.x			DS	5/11/93
In msk_open(), prevented PMIO routines from taking coordinates of an
already-created region mask (in image-relative coordinates) as
section-relative.

66. /pros/xray/xspectral/qpspec/bn_routines.x		DS	5/13/93
In bn_getxy(), check for accelerators in region spec; they're not allowed.

67.  /pros/xray/lib/pros/tsi.x				MC	5/14/93
                         tsidisubs.x
Add routines get_gtsi and disp_gtsi to that can read the PROS
format descriptor to read and/or display the TSI records

68.  /pros/xray/xtiming/qpphase				MC	5/7/93
Moved QPPHASE task from XPROTO To XTIMING

69.  /pros/xray/ximages/qplintran.x			MC	5/7/93
			qpshift.cl
			qprotate.cl
    /pros/xray/xobsolete/qprotate
Added new task qplintran and related scripts to facilitate shifting
and rotating.  RETIRED the former QPROTATE task to XOBSOLETE and
replaced with qprotate script following IRAF rotation specification
convention.

70.  /pros/xray/ximages/qplist.x			MC	5/7/93
Updated QPLIST to call the new 'general' TSI routines for
non-EINSTEIN/ROSAT data or for RATFITS (REV1) data.

71.  /pros/xray/xproto/qpappend/qpappend.x		MC	5/14/93
Added new QPAPPEND task to `append` a list of QPOE files
INCLUDING the auxiliary TSI records of present

72.  /pros/xray/xproto/hkfilter/hkfilter.x		MC	5/14/93
				filter.x
UPdated the hkfilter program to use the 'general' TSI reading
routines to access the QPOE file, so that it is not 
dependent on 'known` instruments.

73.  /pros/xray/xdataio/xrfits.cl			MC	5/7/93
     			xwfits.cl
Added two utility scripts to call STR/WFITS routines with appropriate
default settings

74.  /pros/xray/xdataio/xrarc2pros.cl			MC	5/14/93
Updated RARC2PROS to support the 'EC' energy-encoded image from MPE/PSPC.

75.  /pros/xray/lib/regions/rgop.x			DS	5/15/93
     /pros/xray/lib/regions/rgcreate.x
     /pros/xray/lib/pros/mskopen.x
     /pros/xray/lib/regions/mkpkg
Changed several routines, to make temp masks in image-relative coordinates,
not section-relative; formerly the conversion from section-relative to
image-relative occurred only at the time of flushing the final temp mask
to the target mask; that meant the temp mask borders didn't match the
image borders, which allowed out-of-bounds references.
Added dependencies in mkpkg file.

76.  /pros/xray/lib/pros/mskopen.x			DS	5/18/93
     /pros/xray/ximages/plcreate/plcreate.x
     /pros/xray/ximages/plcreate/mkpkg
Put the dimensions of the mask, not of the image section at the time of
creating it, in the mask header.
(/pros/xray/lib/pros/mkpkg also requires a changed dependency, as soon 
as it's available.)

77.  /pros/xray/lib/regions/rgop.x			DS	5/19/93
Corrected error of trying to convert position coordinates for all shapes, 
in rg_add(); FIELD has no position.

78.  /pros/xray/xlocal/source/qpmax.x			DS	5/19/93
     /pros/xray/xlocal/source/qpproj.x
     /pros/xray/xlocal/source/qppower.x
     /pros/xray/xlocal/source/mkpkg
Expanded region descriptor buffers to SZ_REGINPUTLINE and file spec buffers
to SZ_PATHNAME.

79.  /pros/xray/lib/pros/mkpkg				DS	5/20/93
Completion of revision 76.

80.  /pros/xray/xspatial/isoreg/isoreg.x		DS	5/20/93
     /pros/xray/xspatial/isoreg/mkpkg
Minor changes anticipating allowing a section on the input image.

81.  /pros/xray/doc/regcoords.hlp			DS	5/20/93
     /pros/xray/doc/coords.hlp
Expanded explanation of pixel coordinates in regcoords.hlp.
Cross-referenced regcoords.hlp, qpoe.hlp, and filter.hlp from coords.hlp.
