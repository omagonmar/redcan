#$Header: /home/pros/xray/lib/regions/RCS/mkpkg,v 11.0 1997/11/06 16:18:59 prosb Exp $
#$Log: mkpkg,v $
#Revision 11.0  1997/11/06 16:18:59  prosb
#General Release 2.5
#
#Revision 9.0  1995/11/16 18:25:56  prosb
#General Release 2.4
#
#Revision 8.0  1994/06/27  13:43:50  prosb
#General Release 2.3.1
#
#Revision 7.1  94/05/18  18:27:22  dennis
#New source file regprecheck.x; also added <precess.h> dependency for all 
#files dependent on <regions.h>.
#
#Revision 7.0  93/12/27  18:07:03  prosb
#General Release 2.3
#
#Revision 6.1  93/08/30  20:08:08  dennis
#Added rgop.o's dependence on <plio.h> and rgop.com.
#
#Revision 6.0  93/05/24  15:37:40  prosb
#General Release 2.2
#
#Revision 5.2  93/05/19  00:01:31  dennis
#Added dependency of rgcreate.o on plio.h;
#added dependency of all that need pmset.h on plset.h.
#
#Revision 5.1  93/04/26  23:57:52  dennis
#Regions system rewrite.
#
#Revision 5.0  92/10/29  21:13:35  prosb
#General Release 2.1
#
#Revision 4.1  92/08/07  17:51:40  dennis
#Added dependency of rgcreate.x on regparse.com (this is a correction)
#
#Revision 4.0  92/04/27  17:19:34  prosb
#General Release 2.0:  April 1992
#
#Revision 3.3  91/10/01  19:16:22  mo
#MC	10/1/91		Close the missing 'endif' for the parser entries
#
#Revision 3.2  91/09/27  15:10:44  mo
#MC	9/27/91		Add conditional to rerun yyacc, if the output.x
#			doesn't exist ( as well as being too old. )
#
#Revision 3.1  91/08/02  09:53:52  mo
#MC	8/2/91		Updated for new PROS structure
#
#Revision 2.1  91/04/12  16:18:19  mo
#MC	3/91	 Updated the dependency list
#
#Revision 2.0  91/03/07  00:14:18  pros
#General Release 1.0
#
# Make the region library
 
update:
$iffile (regparse.x)
    $ifnewer (regparse.yy, regparse.x)
        $ifeq (HOSTID, unix)
            $echo "regparse.x is out of date; rebuilding with XYACC:"
            !(rm -f regparse.x; xyacc -d regparse.yy;sed "s/yyparse/rg_yyparse/g" < ytab.x > regparse.x;rm -f ytab.x)
        $else
            $echo "regparse.x is out of date; rebuild with XYACC"
        $endif
    $endif
$else
        $ifeq (HOSTID, unix)
            $echo "regparse.x is out of date; rebuilding with XYACC:"
            !(rm -f regparse.x; xyacc -d regparse.yy;sed "s/yyparse/rg_yyparse/g" < ytab.x > regparse.x;rm -f ytab.x)
        $else
            $echo "regparse.x is out of date; rebuild with XYACC"
	$endif
$endif


$checkout libpros.a ../
$update   libpros.a
$checkin  libpros.a ../
$exit

libpros.a:
	rgop.x		<pmset.h>	<plset.h>	<plio.h> \
			<error.h>	"rgset.h"	<regions.h> \
			<precess.h>	rgop.com
	rgannulus.x	<pmset.h>	<plset.h>	"rgset.h"
	rgbox.x		<pmset.h>	<plset.h>	"rgset.h"
	rgcircle.x	<pmset.h>	<plset.h>	"rgset.h"
	rgellipse.x	<pmset.h>	<plset.h>	"rgset.h"
	rgfield.x	<pmset.h>	<plset.h>	"rgset.h"
	rgpie.x		<pmset.h>	<plset.h>	<error.h> \
			"rgset.h"
	rgpoint.x	<pmset.h>	<plset.h>	"rgset.h"
	rgpolygon.x	<pmset.h>	<plset.h>	<error.h> \
			"rgset.h"
	rgrotbox.x	<pmset.h>	<plset.h>	"rgset.h"
	rgsymmetry.x	<pmset.h>	<plset.h>	"rgset.h"
	rgpldisp.x	<pmset.h>	<plset.h>
	rgpmdisp.x	<pmset.h>	<plset.h>
	rgplpi.x	<pmset.h>	<plset.h>	"rgset.h"
	rgcreate.x	<pmset.h>	<plset.h>	<plio.h> \
			<error.h>	<imhdr.h>	<qpoe.h> \
			<regparse.h>	<regions.h>	<precess.h> \
			regparse.com	rgwcs.com
	rgmask.x	<pmset.h>	<plset.h>
	rgareas.x	<plset.h>
	regcontrol.x	<pmset.h>	<plset.h>	<regparse.h> \
			<regions.h>	<precess.h>	<error.h>
	regparse.x	<plhead.h>	<regparse.h>	regparse.com \
			<regions.h>	<precess.h>	rgwcs.com \
			<error.h>
# regacts.o depends on token values assigned by xyacc's processing of 
#  regparse.yy (above); the token values are stored in ytab.h
	regacts.x	<qpoe.h>	<regparse.h>	regparse.com \
			<regions.h>	<precess.h>	rgwcs.com \
			<error.h>	"regparse.yy"
	regcpu.x	<regparse.h>	regparse.com	<regions.h> \
			<precess.h>	<error.h>
	regnotes.x	<qpoe.h> 	<regparse.h>	regparse.com \
			<regions.h>	<precess.h>	rgwcs.com
	regprecheck.x	<qpset.h>	<regparse.h>	<regions.h> \
			<precess.h>	regparse.com	rgwcs.com
	rgftype.x	<finfo.h>
	rgpllims.x	<plset.h>
	;
